
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="VictoryWoo">
    <title>[Kotlin] Sequence - VictoryWoo</title>
    <meta name="author" content="VictoryWoo">
    
    
        <link rel="icon" href="https://woovictory.github.io/assets/images/develop.ico">
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"VictoryWoo","sameAs":["https://github.com/WooVictory","https://www.facebook.com/WooVictory","https://www.linkedin.com/profile/","jhsw0375@gmail.com"],"image":"Victory.jpeg"},"articleBody":"Kotlin의 Sequence에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 Collection과 Sequence의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.\n\nSequence vs Collection\n[Sequence]\n\nkotlin standard library에는 collection 뿐 아니라 또다른 container type인 sequence를 가지고 있다.\nsequence의 여러 연산 처리는 전체 연산이 처리된 결과가 요구되었을 때, 실제 연산이 일어나며 느리게(나중에) 처리된다.(lazy evaluation)\n동작의 순서 또한 다르다. sequence는 각각 하나의 element에 대해 모든 연산을 수행한다.\n\n[Iterable]\n\n여러 연산을 포함하는 Iterable을 수행할 때는 각 단계(연산)의 처리는 바로 끝나고 즉시 그 결과를 반환한다.\nIterable은 전체 Collection에 대해 각 연산의 수행을 완료하고 다음 단계로 넘어간다.\n\n[Sample Code]\n\n간단한 예제 코드와 함께 이해해보자.\n먼저, Collection의 경우이다.\n\n12345val list = listOf(1,2,-3) // [1,2,-3] 생성val maxOddSquare = list    .map &#123; it*it &#125; // [1,4,9] 생성    .filter &#123; it%2 == 1&#125; // [1,9] 생성    .max()\n\nmap() 연산이 수행될 때, filter() 연산이 수행될 때 총 3개의 intermediate collection(중간 컬렉션 결과값)이 생성된다.\n원하는 최종 결과를 위해 불필요한 중간 결과가 생성된다는 비효율성이 존재한다.\n1개의 연산만을 진행할 경우, 바로 최종 결과물에 도달하므로 문제가 없지만 chain calls 연산을 진행하는 경우 유의미한 퍼포먼스 오버헤드가 생길 수 있다.\nCollection을 다룰 때는 보통 1개의 함수로 처리하기 보다는 다양한 확장함수를 이용한 chain calls 패턴이 대부분이기 때문에 이 이슈가 중요할 수 있으며 문제를 피하는 방법이 sequence이다.\n아래는 sequence의 경우이다.\n\n123456val list = listOf(1,2,-3) // [1,2,-3] 생성val maxOddSquare = list    .asSequence()    .map &#123; it*it &#125;    .filter &#123; it%2 == 1&#125;    .max()\n\nasSequence()를 통해 sequence로 변환해준다.\nsequence를 사용하는 경우, 중간 과정에서 intermediate collection(중간 컬렉션 결과값)이 반환되지 않으며, first collection에 대한 reference와 어떠한 연산이 수행되는지를 저장해둔 sequecne object가 반환된다.\n그리고 결과가 필요한 시점에만 연산을 수행(lazy evaluation)하여 최종 결과만을 반환한다.\n이러한 방식을 통해 chain calls에 대한 퍼포먼스 오버헤드를 막을 수 있다.\n\n따라서 sequence는 중간 단계의 결과에 대한 처리를 피할 수 있게 해주며, Collection 전체 처리에 대한 수행 성능이 향상된다. 하지만 크기가 작은 Collection이나 단순한 연산 동작에 대해서는 오히려 불필요한 오버헤드가 생길 수도 있다. 그러므로 어느 경우에 sequence와 Iterable이 나을지 적절하게 선택해야 한다.\nSequence\n[From elements]\n\nsequenceOf() 함수를 사용하여 원소를 포함하는 sequence를 생성할 수 있다.\n\n1val numbersSequence = sequenceOf(\"four\", \"three\", \"two\", \"one\")\n[From Iterable]\n\nasSequence()를 사용하면 List, Set 같은 Iterable Object로부터 Sequence를 생성할 수 있다.\n\n1val numbers = listOf(\"one\", \"two\", \"three\", \"four\").asSequence()\n[From function]\n\ngenerateSequence()를 사용하여 element를 생성하는 함수(람다)를 사용해 sequence를 생성할 수 있다.\n첫번째 element를 특정 값으로 지정하거나 함수 호출의 결과를 지정하는 것도 가능하다.\n함수가 null을 반환하면 sequence 생성을 멈추게 된다.\n\n1234// 무한히 생성되는 오류를 가진 코드이다.val oddNumbers = generateSequence(1) &#123; it + 2 &#125;println(oddNumbers.take(5).toList()) // [1,3,5,7,9] 생성println(oddNumbers.count()) // error : the sequence is infinite\n\ngenerateSequence() 함수로 유한한 sequence를 만들기 위해서는 마지막 element 뒤에 null을 반환하는 함수를 제공해야 한다.\n\n123val oddNumbers = generateSequence(1) &#123; if (it &lt; 10) it + 2 else null &#125;println(oddNumbers.take(5).toList()) // [1,3,5,7,9] 생성println(oddNumbers.count()) // 6\nsequence processing example\n[Iterable]\n1234567891011121314151617181920212223val words = \"The quick brown fox jumps over the lazy dog\".split(\" \")val list =        words.filter &#123; println(\"filter : $it\"); it.length &gt; 3 &#125;                .map &#123; println(\"length : $&#123;it.length&#125;\"); it.length &#125;                .take(4)println(list)// Resultfilter : Thefilter : quickfilter : brownfilter : foxfilter : jumpsfilter : overfilter : thefilter : lazyfilter : doglength : 5length : 5length : 5length : 4length : 4[5, 5, 5, 4]\n\nfilter()에서 모든 element에 대해 동작이 수행되고 나서 map()에서 filter()의 결과로 리턴된 list(elements)에 대해 연산을 수행한다.\n\n\n[Sequence]\n1234567891011121314151617181920val words = \"The quick brown fox jumps over the lazy dog\".split(\" \")val sequence = words.asSequence()        .filter &#123; println(\"filter : $it\"); it.length &gt; 3 &#125;        .map &#123; println(\"length : $&#123;it.length&#125;\"); it.length &#125;        .take(4)println(sequence.toList())// Resultfilter : Thefilter : quicklength : 5filter : brownlength : 5filter : foxfilter : jumpslength : 5filter : overlength : 4[5, 5, 5, 4]\n\nprint문이 먼저 호출된 것을 통해 filter()와 map()이 실제 필요로 하는 때에 호출되는 것을 볼 수 있다.\n또한, map()은 filter()가 element를 반환하자마자 바로 실행되는 것을 볼 수 있다.\n그리고 take()에 의해 최종 결과의 갯수가 4개를 만족하면 나머지 수행은 멈추고 모든 동작이 마무리 된다. 이때, 뒤의 단어에 대한 연산은 수행되지 않음을 확인할 수 있다.\n\n\n\n위의 예제에서 같은 크기의 list에 대해 Iterable은 23단계를 수행하지만 sequence는 18단계만을 수행하는 것을 확인할 수 있다.\n\nReferences\n\n코틀린(Kotlin) Collections : 시퀀스(sequences\n[Kotlin] 코틀린 람다 #2 Collection API - filter, map, groupby, flatmap, sequence, find, any, all, count\n코틀린 입문 스터디 (15) Sequences\n\n","dateCreated":"2020-07-05T14:53:05+09:00","dateModified":"2020-07-22T11:59:07+09:00","datePublished":"2020-07-05T14:53:05+09:00","description":"Kotlin의 Sequence에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 Collection과 Sequence의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.","headline":"[Kotlin] Sequence","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"},"publisher":{"@type":"Organization","name":"VictoryWoo","sameAs":["https://github.com/WooVictory","https://www.facebook.com/WooVictory","https://www.linkedin.com/profile/","jhsw0375@gmail.com"],"image":"Victory.jpeg","logo":{"@type":"ImageObject","url":"Victory.jpeg"}},"url":"https://woovictory.github.io/2020/07/05/Kotlin-Sequence/","keywords":"Android, Kotlin, Collection, Sequence"}</script>
    <meta name="description" content="Kotlin의 Sequence에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 Collection과 Sequence의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.">
<meta name="keywords" content="Android,Kotlin,Collection,Sequence">
<meta property="og:type" content="blog">
<meta property="og:title" content="[Kotlin] Sequence">
<meta property="og:url" content="https://woovictory.github.io/2020/07/05/Kotlin-Sequence/index.html">
<meta property="og:site_name" content="VictoryWoo">
<meta property="og:description" content="Kotlin의 Sequence에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 Collection과 Sequence의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://woovictory.github.io/img/list_processing.png">
<meta property="og:image" content="https://woovictory.github.io/img/sequence_processing.png">
<meta property="og:updated_time" content="2020-07-22T02:59:07.046Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Kotlin] Sequence">
<meta name="twitter:description" content="Kotlin의 Sequence에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 Collection과 Sequence의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.">
<meta name="twitter:image" content="https://woovictory.github.io/img/list_processing.png">
    
    
        
    
    
        <meta property="og:image" content="https://woovictory.github.io/assets/images/Victory.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125410253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125410253-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            VictoryWoo
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">VictoryWoo</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기록을 통해 사람들과 공유하는 것을 좋아합니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/jhsw0375@gmail.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            [Kotlin] Sequence
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-07-05T14:53:05+09:00">
	
		    Jul 05, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Kotlin/">Kotlin</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>Kotlin의 <code>Sequence</code>에 대해서 알아보려고 한다. 사실, [Kotlin in action] 책에서 설명이 나오지만, 당시에는 대략적으로만 이해하고 넘어갔던 것 같다. 하지만, 최근에 <strong>Collection과 Sequence</strong>의 차이를 물어보는 질문에 대해서 제대로 답하지 못했던 것 같아서 그 차이를 알기 위해 정리하려 한다.</p>
<a id="more"></a>
<h3 id="sequence-vs-collection">Sequence vs Collection</h3>
<p><strong>[Sequence]</strong></p>
<ul>
<li>kotlin standard library에는 collection 뿐 아니라 또다른 container type인 <code>sequence</code>를 가지고 있다.</li>
<li>sequence의 여러 연산 처리는 전체 연산이 처리된 결과가 요구되었을 때, 실제 연산이 일어나며 느리게(나중에) 처리된다.(lazy evaluation)</li>
<li>동작의 순서 또한 다르다. sequence는 각각 하나의 element에 대해 모든 연산을 수행한다.</li>
</ul>
<p><strong>[Iterable]</strong></p>
<ul>
<li>여러 연산을 포함하는 Iterable을 수행할 때는 각 단계(연산)의 처리는 바로 끝나고 즉시 그 결과를 반환한다.</li>
<li>Iterable은 전체 Collection에 대해 각 연산의 수행을 완료하고 다음 단계로 넘어간다.</li>
</ul>
<p><strong>[Sample Code]</strong></p>
<ul>
<li>간단한 예제 코드와 함께 이해해보자.</li>
<li>먼저, Collection의 경우이다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">-3</span>) <span class="comment">// [1,2,-3] 생성</span></span><br><span class="line"><span class="keyword">val</span> maxOddSquare = list</span><br><span class="line">    .map &#123; it*it &#125; <span class="comment">// [1,4,9] 생성</span></span><br><span class="line">    .filter &#123; it%<span class="number">2</span> == <span class="number">1</span>&#125; <span class="comment">// [1,9] 생성</span></span><br><span class="line">    .max()</span><br></pre></td></tr></table></figure>
<ul>
<li>map() 연산이 수행될 때, filter() 연산이 수행될 때 총 3개의 <code>intermediate collection(중간 컬렉션 결과값)</code>이 생성된다.</li>
<li>원하는 최종 결과를 위해 불필요한 중간 결과가 생성된다는 비효율성이 존재한다.</li>
<li>1개의 연산만을 진행할 경우, 바로 최종 결과물에 도달하므로 문제가 없지만 chain calls 연산을 진행하는 경우 유의미한 퍼포먼스 오버헤드가 생길 수 있다.</li>
<li>Collection을 다룰 때는 보통 1개의 함수로 처리하기 보다는 다양한 확장함수를 이용한 chain calls 패턴이 대부분이기 때문에 이 이슈가 중요할 수 있으며 문제를 피하는 방법이 <code>sequence</code>이다.</li>
<li>아래는 sequence의 경우이다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="number">1</span>,<span class="number">2</span>,<span class="number">-3</span>) <span class="comment">// [1,2,-3] 생성</span></span><br><span class="line"><span class="keyword">val</span> maxOddSquare = list</span><br><span class="line">    .asSequence()</span><br><span class="line">    .map &#123; it*it &#125;</span><br><span class="line">    .filter &#123; it%<span class="number">2</span> == <span class="number">1</span>&#125;</span><br><span class="line">    .max()</span><br></pre></td></tr></table></figure>
<ul>
<li>asSequence()를 통해 sequence로 변환해준다.</li>
<li>sequence를 사용하는 경우, 중간 과정에서 <code>intermediate collection(중간 컬렉션 결과값)</code>이 반환되지 않으며, first collection에 대한 reference와 어떠한 연산이 수행되는지를 저장해둔 sequecne object가 반환된다.</li>
<li>그리고 결과가 필요한 시점에만 연산을 수행(lazy evaluation)하여 최종 결과만을 반환한다.</li>
<li>이러한 방식을 통해 chain calls에 대한 퍼포먼스 오버헤드를 막을 수 있다.</li>
</ul>
<p>따라서 sequence는 중간 단계의 결과에 대한 처리를 피할 수 있게 해주며, Collection 전체 처리에 대한 수행 성능이 향상된다. 하지만 크기가 작은 Collection이나 단순한 연산 동작에 대해서는 오히려 불필요한 오버헤드가 생길 수도 있다. <code>그러므로 어느 경우에 sequence와 Iterable이 나을지 적절하게 선택해야 한다.</code></p>
<h3 id="sequence">Sequence</h3>
<p><strong>[From elements]</strong></p>
<ul>
<li><code>sequenceOf()</code> 함수를 사용하여 원소를 포함하는 sequence를 생성할 수 있다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbersSequence = sequenceOf(<span class="string">"four"</span>, <span class="string">"three"</span>, <span class="string">"two"</span>, <span class="string">"one"</span>)</span><br></pre></td></tr></table></figure>
<p><strong>[From Iterable]</strong></p>
<ul>
<li><code>asSequence()</code>를 사용하면 List, Set 같은 Iterable Object로부터 Sequence를 생성할 수 있다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbers = listOf(<span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>).asSequence()</span><br></pre></td></tr></table></figure>
<p><strong>[From function]</strong></p>
<ul>
<li><code>generateSequence()</code>를 사용하여 element를 생성하는 함수(람다)를 사용해 sequence를 생성할 수 있다.</li>
<li>첫번째 element를 특정 값으로 지정하거나 함수 호출의 결과를 지정하는 것도 가능하다.</li>
<li>함수가 null을 반환하면 sequence 생성을 멈추게 된다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 무한히 생성되는 오류를 가진 코드이다.</span></span><br><span class="line"><span class="keyword">val</span> oddNumbers = generateSequence(<span class="number">1</span>) &#123; it + <span class="number">2</span> &#125;</span><br><span class="line">println(oddNumbers.take(<span class="number">5</span>).toList()) <span class="comment">// [1,3,5,7,9] 생성</span></span><br><span class="line">println(oddNumbers.count()) <span class="comment">// error : the sequence is infinite</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>generateSequence()</code> 함수로 유한한 sequence를 만들기 위해서는 마지막 element 뒤에 null을 반환하는 함수를 제공해야 한다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> oddNumbers = generateSequence(<span class="number">1</span>) &#123; <span class="keyword">if</span> (it &lt; <span class="number">10</span>) it + <span class="number">2</span> <span class="keyword">else</span> <span class="literal">null</span> &#125;</span><br><span class="line">println(oddNumbers.take(<span class="number">5</span>).toList()) <span class="comment">// [1,3,5,7,9] 생성</span></span><br><span class="line">println(oddNumbers.count()) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>
<h3 id="sequence-processing-example">sequence processing example</h3>
<p><strong>[Iterable]</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> words = <span class="string">"The quick brown fox jumps over the lazy dog"</span>.split(<span class="string">" "</span>)</span><br><span class="line"><span class="keyword">val</span> list =</span><br><span class="line">        words.filter &#123; println(<span class="string">"filter : <span class="variable">$it</span>"</span>); it.length &gt; <span class="number">3</span> &#125;</span><br><span class="line">                .map &#123; println(<span class="string">"length : <span class="subst">$&#123;it.length&#125;</span>"</span>); it.length &#125;</span><br><span class="line">                .take(<span class="number">4</span>)</span><br><span class="line">println(list)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result</span></span><br><span class="line">filter : The</span><br><span class="line">filter : quick</span><br><span class="line">filter : brown</span><br><span class="line">filter : fox</span><br><span class="line">filter : jumps</span><br><span class="line">filter : over</span><br><span class="line">filter : the</span><br><span class="line">filter : lazy</span><br><span class="line">filter : dog</span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">length : <span class="number">4</span></span><br><span class="line">length : <span class="number">4</span></span><br><span class="line">[<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>filter()</code>에서 모든 element에 대해 동작이 수행되고 나서 <code>map()</code>에서 <code>filter()</code>의 결과로 리턴된 list(elements)에 대해 연산을 수행한다.</li>
</ul>
<img src="/img/list_processing.png" width="700" height="200">
<p><strong>[Sequence]</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> words = <span class="string">"The quick brown fox jumps over the lazy dog"</span>.split(<span class="string">" "</span>)</span><br><span class="line"><span class="keyword">val</span> sequence = words.asSequence()</span><br><span class="line">        .filter &#123; println(<span class="string">"filter : <span class="variable">$it</span>"</span>); it.length &gt; <span class="number">3</span> &#125;</span><br><span class="line">        .map &#123; println(<span class="string">"length : <span class="subst">$&#123;it.length&#125;</span>"</span>); it.length &#125;</span><br><span class="line">        .take(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">println(sequence.toList())</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result</span></span><br><span class="line">filter : The</span><br><span class="line">filter : quick</span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">filter : brown</span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">filter : fox</span><br><span class="line">filter : jumps</span><br><span class="line">length : <span class="number">5</span></span><br><span class="line">filter : over</span><br><span class="line">length : <span class="number">4</span></span><br><span class="line">[<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>print문이 먼저 호출된 것을 통해 filter()와 map()이 실제 필요로 하는 때에 호출되는 것을 볼 수 있다.</li>
<li>또한, <code>map()</code>은 <code>filter()</code>가 element를 반환하자마자 바로 실행되는 것을 볼 수 있다.</li>
<li>그리고 <code>take()</code>에 의해 최종 결과의 갯수가 4개를 만족하면 나머지 수행은 멈추고 모든 동작이 마무리 된다. 이때, 뒤의 단어에 대한 연산은 수행되지 않음을 확인할 수 있다.</li>
</ul>
<img src="/img/sequence_processing.png" width="700" height="200">
<ul>
<li>위의 예제에서 같은 크기의 list에 대해 Iterable은 23단계를 수행하지만 sequence는 18단계만을 수행하는 것을 확인할 수 있다.</li>
</ul>
<h3 id="references">References</h3>
<ul>
<li><a href="https://iosroid.tistory.com/79" target="_blank" rel="noopener">코틀린(Kotlin) Collections : 시퀀스(sequences</a></li>
<li><a href="https://tourspace.tistory.com/111" target="_blank" rel="noopener">[Kotlin] 코틀린 람다 #2 Collection API - filter, map, groupby, flatmap, sequence, find, any, all, count</a></li>
<li><a href="https://medium.com/@kbm1378/%EC%BD%94%ED%8B%80%EB%A6%B0-%EC%9E%85%EB%AC%B8-%EC%8A%A4%ED%84%B0%EB%94%94-15-sequences-52cfca1805c8" target="_blank" rel="noopener">코틀린 입문 스터디 (15) Sequences</a></li>
</ul>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Android/">Android</a> <a class="tag tag--primary tag--small t-link" href="/tags/Collection/">Collection</a> <a class="tag tag--primary tag--small t-link" href="/tags/Kotlin/">Kotlin</a> <a class="tag tag--primary tag--small t-link" href="/tags/Sequence/">Sequence</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/07/05/Kotlin-Collection-Filter-Map/"
                    data-tooltip="[Kotlin] filter, map 호출 순서에 따른 성능 차이"
                    aria-label="PREVIOUS: [Kotlin] filter, map 호출 순서에 따른 성능 차이"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/07/05/Android-ManifestError/"
                    data-tooltip="[Android] Manifest merger failed with multiple errors, see logs"
                    aria-label="NEXT: [Android] Manifest merger failed with multiple errors, see logs"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 VictoryWoo. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/07/05/Kotlin-Collection-Filter-Map/"
                    data-tooltip="[Kotlin] filter, map 호출 순서에 따른 성능 차이"
                    aria-label="PREVIOUS: [Kotlin] filter, map 호출 순서에 따른 성능 차이"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/07/05/Android-ManifestError/"
                    data-tooltip="[Android] Manifest merger failed with multiple errors, see logs"
                    aria-label="NEXT: [Android] Manifest merger failed with multiple errors, see logs"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://woovictory.github.io/2020/07/05/Kotlin-Sequence/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">VictoryWoo</h4>
        
            <div id="about-card-bio"><p>기록을 통해 사람들과 공유하는 것을 좋아합니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Android Developer</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/color_blue.jpeg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://woovictory.github.io/2020/07/05/Kotlin-Sequence/';
              
            this.page.identifier = '2020/07/05/Kotlin-Sequence/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'https-woovictory-github-io';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
