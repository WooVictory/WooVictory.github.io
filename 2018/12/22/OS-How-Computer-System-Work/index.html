<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>[운영체제] 컴퓨터 시스템의 동작 원리 | VictoryWoo</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="OS,운영체제" />
    
    <meta name="description" content="컴퓨터 시스템의 구조 CPU와 I/O 연산 인터럽트의 일반적 기능 인터럽트 핸들링  컴퓨터 시스템의 구조  OS 중 항상 메모리에 올라가 있는 부분은 전체 OS 중 일부분에 해당되는데, 이 부분은 커널이라고 한다. CPU와 I/O 연산   컴퓨터에서 연산을 한다는 뜻은 CPU가 무언가 일을 한다는 것을 의미한다. 컴퓨터 내의 각 하드웨어 장치들에는 컨트롤">
<meta name="keywords" content="OS,운영체제">
<meta property="og:type" content="article">
<meta property="og:title" content="[운영체제] 컴퓨터 시스템의 동작 원리">
<meta property="og:url" content="https://woovictory.github.io/2018/12/22/OS-How-Computer-System-Work/index.html">
<meta property="og:site_name" content="VictoryWoo">
<meta property="og:description" content="컴퓨터 시스템의 구조 CPU와 I/O 연산 인터럽트의 일반적 기능 인터럽트 핸들링  컴퓨터 시스템의 구조  OS 중 항상 메모리에 올라가 있는 부분은 전체 OS 중 일부분에 해당되는데, 이 부분은 커널이라고 한다. CPU와 I/O 연산   컴퓨터에서 연산을 한다는 뜻은 CPU가 무언가 일을 한다는 것을 의미한다. 컴퓨터 내의 각 하드웨어 장치들에는 컨트롤">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://woovictory.github.io/img/storage_os.png">
<meta property="og:updated_time" content="2018-12-23T14:19:12.601Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[운영체제] 컴퓨터 시스템의 동작 원리">
<meta name="twitter:description" content="컴퓨터 시스템의 구조 CPU와 I/O 연산 인터럽트의 일반적 기능 인터럽트 핸들링  컴퓨터 시스템의 구조  OS 중 항상 메모리에 올라가 있는 부분은 전체 OS 중 일부분에 해당되는데, 이 부분은 커널이라고 한다. CPU와 I/O 연산   컴퓨터에서 연산을 한다는 뜻은 CPU가 무언가 일을 한다는 것을 의미한다. 컴퓨터 내의 각 하드웨어 장치들에는 컨트롤">
<meta name="twitter:image" content="https://woovictory.github.io/img/storage_os.png">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" type="text/css" href="">
    <link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css">	
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothiccoding.css">
    <link rel="stylesheet" href="https://cdn.rawgit.com/innks/NanumSquareRound/master/nanumsquareround.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/3.3.1/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">VictoryWoo&#39;s Blog</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">Home</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/">Algorithm</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/BOJ/">BOJ</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Algorithm/Programmers/">Programmers</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/">CS</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/Design-Pattern/">Design Pattern</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/OS/">OS</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/개발-상식/">개발 상식</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/네트워크/">네트워크</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/데이터베이스/">데이터베이스</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/알고리즘/">알고리즘</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/CS/자료구조/">자료구조</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/">Programming</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Android/">Android</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Inno-SOPT/">Inno_SOPT</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Java/">Java</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Kotlin/">Kotlin</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/Node-js/">Node.js</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/RxJava/">RxJava</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Programming/etc/">etc</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/algorithm/">algorithm</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/algorithm/BOJ/">BOJ</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/algorithm/개념/">개념</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">About</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/CS/">CS</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/CS/OS/">OS</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
     google_ad_client: "ca-pub-9725307592233286",
     enable_page_level_ads: true
});
</script>
                            <article id="post-OS-How-Computer-System-Work" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        [운영체제] 컴퓨터 시스템의 동작 원리
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/12/22/OS-How-Computer-System-Work/" class="article-date">
            <time datetime="2018-12-21T16:11:21.000Z" itemprop="datePublished">2018-12-22</time>
        </a>
    </div>

		

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/OS/">OS</a>, <a class="tag-link" href="/tags/운영체제/">운영체제</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <ul>
<li><a href="#%EC%BB%B4%ED%93%A8%ED%84%B0-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-%EA%B5%AC%EC%A1%B0">컴퓨터 시스템의 구조</a></li>
<li><a href="#CPU%EC%99%80-I/O-%EC%97%B0%EC%82%B0">CPU와 I/O 연산</a></li>
<li><a href="#%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8%EC%9D%98-%EC%9D%BC%EB%B0%98%EC%A0%81-%EA%B8%B0%EB%8A%A5">인터럽트의 일반적 기능</a></li>
<li><a href="#%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8-%ED%95%B8%EB%93%A4%EB%A7%81">인터럽트 핸들링</a></li>
</ul>
<h1 id="컴퓨터-시스템의-구조">컴퓨터 시스템의 구조</h1>
<hr>
<p>OS 중 항상 메모리에 올라가 있는 부분은 전체 OS 중 일부분에 해당되는데, 이 부분은 <strong>커널</strong>이라고 한다.</p>
<h1 id="cpu와-io-연산">CPU와 I/O 연산</h1>
<hr>
<ul>
<li>컴퓨터에서 연산을 한다는 뜻은 CPU가 무언가 일을 한다는 것을 의미한다.</li>
<li>컴퓨터 내의 각 하드웨어 장치들에는 컨트롤러(Controller:제어기)라는 것이 붙어있다.</li>
<li><strong>컨트롤러</strong>는 일종의 작은 CPU로서, 컴퓨터 전체에 CPU라는 중앙 처리 장치가 있듯이, 컨트롤러는 각 하드웨어 장치마다 존재하면서 이들을 제어하는 작은 CPU라고 할 수 있다.</li>
<li>각 장치마다 이를 제어하기 위해 설치된 장체 컨트롤러에는 장치로부터 들어오고 나가는 데이터를 임시로 저장하기 위한 작은 메모리를 갖고 있으며, 이를 <strong>로컬 버퍼</strong>라고 부른다.</li>
<li>이 때 장치에서 로컬 버퍼로 읽어오는 일은 컨트롤러가 담당한다.</li>
<li>데이터를 모두 가지고 왔는지 확인하는 작업은 메인 CPU가 일일이 체크하는 것이 아니라 장치에 있는 컨트롤러가 <strong>인터럽트</strong>를 발생시켜 CPU에게 보고한다.</li>
<li>이 때 <strong>인터럽트란 컨트롤러들이 CPU의 서비스가 필요할 때 이를 통보하는 방법을 말한다.</strong></li>
<li>기본적으로 CPU는 매 시점 메모리에서 명령을 하나씩 읽어와서 수행한다.</li>
<li>이 때 CPU 옆에는 <strong>인터럽트 라인</strong>이 있어서 CPU가 자신의 작업을 하던 중간에 인터럽트 라인에 신호가 들어오면 하던 일을 멈추고, 인터럽트와 관련된 일을 처리한다.<br>
즉, CPU는 명령 하나를 수행할 때마다 인터럽트가 발생했는지를 체크한다.</li>
</ul>
<h1 id="인터럽트의-일반적-기능">인터럽트의 일반적 기능</h1>
<hr>
<ul>
<li>OS 커널에는 인터럽트가 들어왔을 때 해야 할 일을 미리 다 프로그래밍해서 보관하고 있다. 그 중 한가지가 <strong>인터럽트 처리 루틴</strong>이다.</li>
<li>먼저, 로컬 버퍼에 있는 내용을 프로그램 B가 사용할 수 있도록 <strong>메모리에 전달하고</strong>, 이제 B가 CPU를 할당받을 경우 다음 <code>명령(instruction)</code>을 수행할 수 있음을 표시한다.</li>
<li>인터럽트가 발생하면 CPU는 하던 일을 멈추고 인터럽트를 처리하기 위한 루틴(OS 커널 내부 코드)에 들어가서 정의된 일을 찾게 된다.</li>
<li>OS는 할 일을 쉽게 찾아가기 위해 <strong>인터럽트 벡터</strong>라는 것을 갖고 있다.</li>
</ul>
<blockquote>
<p>인터럽트 벡터란?<br>
인터럽트 종류마다 번호를 정해서 번호에 따라 처리해야 할 코드가 위치한 부분을 포인터로 가리키는 자료 구조이다.</p>
</blockquote>
<ul>
<li>실제 처리해야 할 내용은 <strong>인터럽트 서비스 루틴</strong>이라는 다른 곳에 정의된다.</li>
</ul>
<h1 id="인터럽트-핸들링">인터럽트 핸들링</h1>
<hr>
<ul>
<li>
<p>CPU에서 명령이 수행될 때에는 CPU 내부에 있는 임시 기억 장치인 <strong>레지스터</strong>에 데이터를 Read/Write 하는 작업을 수행하게 되는데, 인터럽트가 발생해 새로운 명령을 수행하면 기존의 레지스터 값들이 지워지게 되므로 레지스터 값 등 CPU 내의 하드웨어 상태를 저장해 두어야 한다.</p>
</li>
<li>
<p>OS 커널 영역에는 현재 시스템 내에서 수행되는 프로그램들을 관리하기 위한 자료구조인 <code>프로세스 제어 블록(PCB)</code>을 두고 있다.</p>
<ul>
<li>PCB 중 일부분은 인터럽트 발생 시 프로그램의 어느 부분이 수행되던 중이었는지를 저장하기 위해 사용된다.</li>
<li>저장되는 내용으로는 현재 수행 중이던 메모리 주소와 레지스터 값, HW 상태 등이 있다.</li>
<li>인터럽트 수행이 끝나면 PCB에 저장된 값을 CPU 상에 다시 복원해 직전의 명령을 계속 수행할 수 있도록 한다.</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>현재 수행 중인 프로그램의 수가 n개라고 할 때, 커널 스택은 n만큼 독립적인 공간을 둔다.</p>
<ul>
<li>즉, 인터럽트 처리 루틴으로 넘어와서 함수 호출이 이루어질 경우에는 각 프로세스별로 독자적인 <strong>커널 스택</strong>을 사용하게 된다.</li>
<li>프로그램 A가 수행 중에 인터럽트가 발생하면 현재까지 수행된 지점을 <strong>프로세스 제어 블록</strong>(PCB)에 저장하고, <strong>인터럽트 처리 루틴</strong>으로 와서 커널 코드를 수행하게 되며, 이 때 이루어지는 함수 호출은 프로세스 A의 <strong>커널 스택</strong>을 사용하게 된다</li>
</ul>
</li>
<li>
<p>통상적으로 인터럽트라 하면 HW 인터럽트를 의미하고, SW 인터럽트는 <code>트랩(trap)</code>라는 용어를 사용한다.</p>
<ul>
<li>SW 인터럽트의 예로는 예외 상황(Exception), 시스템 콜(System Call)등이 있다.</li>
<li>SW 인터럽트는 HW 인터럽트처럼 컨트롤러가 발생시키는 인터럽트가 아니라 프로그램 수행 도중 직접 CPU에 인터럽트 라인을 세팅하여 발생시킨다.</li>
</ul>
</li>
</ul>
<h1 id="입출력-구조">입출력 구조</h1>
<hr>
<p>입출력(Input/Output)이란 컴퓨터 시스템이 컴퓨터 외부의 주변 장치들과 데이터를 주고 받는 것을 말한다. 입출력 방식에는 동기식 입출력과 비동기식 입출력이 있다.</p>
<h2 id="동기식-입출력">동기식 입출력</h2>
<ul>
<li>입출력 요청 후 입출력 작업이 완료된 후에야 CPU의 제어권이 그 프로그램에게 다시 넘어갈 수 있는 방식을 말한다. [호출한 프로그램에게 다시 넘어간다!]</li>
</ul>
<p><strong>Example</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">프로그램 A가 CPU를 할당받고 명령을 수행하다가 입출력 요청을 하게 되면 </span><br><span class="line">입출력 작업이 완료될 때까지 CPU의 낭비가 초래되므로</span><br><span class="line">CPU를 프로그램 A에게서 선점해 다른 프로그램 B에게 할당하게 된다.</span><br><span class="line">그러면 프로그램 B가 CPU를 할당받아 명령을 수행하고, 프로그램 A의 입출력이 완료될 때까지 A에게는 CPU를 다시 할당하지 않는다.</span><br><span class="line">이는 입출력이 완료될 때까지 그 프로그램에 CPU를 할당하더라도 명령을 수행하지 못하기 때문이다.</span><br></pre></td></tr></table></figure>
<ul>
<li>이것을 프로그램 <code>봉쇄 상태(Blocked State)</code>로 전환시킨다고 말한다.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">선점 시 다음과 같은 문제 발생이 가능하다.</span><br><span class="line">프로그램 A가 파일의 내용을 1에서 3으로 바꾸는 입출력을 요청</span><br><span class="line">그러면 A로부터 CPU를 선점해서 프로그램 B에게 할당</span><br><span class="line">프로그램 B는 파일의 내용 값을 1 증가시키는 연산 실행</span><br><span class="line"></span><br><span class="line">그러면 결과적으로</span><br><span class="line">1-&gt;3-&gt;4가 아닌 1-&gt;2-&gt;3이 된다.</span><br></pre></td></tr></table></figure>
<ul>
<li>따라서 동기식 입출력에서는 입출력 요청의 동기화를 위해 장치별로 <code>큐(Queue)</code>를 두어 요청 순서대로 처리하여 동기화 문제를 해결한다.</li>
</ul>
<blockquote>
<p>동기식 입출력 요약</p>
</blockquote>
<ol>
<li>동기식 입출력을 요청한 프로그램은 입출력이 완료될 때까지 다음 명령을 수행할 수 없기에 CPU가 낭비된다.</li>
<li>CPU의 낭비를 막고 효율적인 사용을 위해 입출력이 수행되는 동안 다른 프로그램에게 CPU를 양도하여 동시에 다수의 입출력 연산이 가능하게 한다.</li>
<li>다수의 프로그램이 동시에 입출력 연산을 요청하는 경우 동기성을 보장하기 위해 장치마다 큐를 두어 해결한다.</li>
</ol>
<h3 id="동기식-입출력-과정1">동기식 입출력 과정(1)</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">사용자가 I/O 요청을 하면 먼저 OS의 커널로 CPU의 제어권이 넘어와서</span><br><span class="line">입출력 처리와 관련된 커널의 코드가 수행된다.</span><br><span class="line"></span><br><span class="line">이 때, 입출력을 호출한 프로세스의 상태를 봉쇄 상태로 바꾸고</span><br><span class="line">입출력이 완료될 때까지 CPU를 할당받지 못하도록 한다.</span><br><span class="line"></span><br><span class="line">입출력이 완료되면 I/O 컨트롤러가 CPU에게 인터럽트를 발생시켜 입출력이 완려되었음을 알려준다.</span><br><span class="line">그러면 이 프로세스의 봉쇄 상태를 해제시켜 CPU를 할당받을 수 있는 권한디 다시 생기게 된다.</span><br></pre></td></tr></table></figure>
<h3 id="동기식-입출력-과정2">동기식 입출력 과정(2)</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">프로그램 A가 실행 중에 디스크에서 어떤 데이터를 읽어오는 명령을 만나면</span><br><span class="line">프로그램 A는 시스템 콜을 통해 CPU에게 S/W 인터럽트를 발생시킨다.</span><br><span class="line"></span><br><span class="line">그러면 CPU는 지금까지 프로그램 A의 작업을 멈추고 현재 상태를 PCB에 저장 후</span><br><span class="line"> 인터럽트에 의해 처리해야 할 커널의 루틴으로 이동한다.</span><br><span class="line"></span><br><span class="line">처리 루틴으로 이동하면 CPU는 컨트롤러에게 입출력 연산을 요청한다.</span><br><span class="line">그러면 컨트롤러는 A가 요청한 데이터를 디스크로부터 자신의 로컬 버퍼로 읽어온다.</span><br><span class="line"></span><br><span class="line">읽어오는 동안 프로그램 A는 봉쇄 상태가 되고 CPU를 다른 프로세스에게 선점당하게 되며, </span><br><span class="line">CPU는 다른 프로세스에게 할댕되어 계속 CPU가 일을 할 수 있도록 한다.</span><br><span class="line"></span><br><span class="line">원하는 정보가 로컬 버퍼로 다 들어오면 컨트롤러는 CPU에게 인터럽트를 발생시킨다. </span><br><span class="line">이 때 발생하는 인터럽트는 H/W 인터럽테에 해당한다.</span><br><span class="line"></span><br><span class="line">프로그램 B를 수행중이던 CPU는 작업을 멈추고 현재 상태를 저장 후 인터럽트를 처리하게 된다.</span><br><span class="line"></span><br><span class="line">인터럽트 처리 루틴은 로컬 버퍼에 있는 A가 요청한 데이터를 A의 메모리 영역으로 읽어오고, A의 봉쇄 상태를 해제시킨다.</span><br><span class="line"> 그러면 A는 다시 CPU를 기다리는 줄에 대기하게 된다.</span><br><span class="line"></span><br><span class="line">그 후 CPU는 원래 수행하던 프로그램 B의 지점으로 돌아가서 하던 업무를 계속 수행한다.</span><br><span class="line"></span><br><span class="line">프로그램 A는 CPU를 기다리는 줄에서 기다리다 자신의 차례가 되면 CPU를 할당 받고 입출력 연산 이후의 작업을 수행하게 된다.</span><br></pre></td></tr></table></figure>
<h2 id="비동기식-입출력">비동기식 입출력</h2>
<hr>
<ul>
<li>입출력 연산 요청 후 연산 결과를 기다리는게 아니라 CPU의 제어권을 다시 프로그램에게 곧바로 부여하는 방식이다.</li>
<li>어떤 프로그램이 데이터를 디스크에서 읽어오라는 요청을 했을 때 보통은 읽어온 결과를 이용해서 다음 연산을 수행하지만 경우에 따라서는 그 데이터와 관련없이 수행할 수 있는 일이 있을 수 있다.</li>
<li>비동기식 입출력에서는 그러한 작업을 먼저 수행하고, 읽어오는 데이터가 반드시 있어야 수행할 수 있는 일들은 입출력이 완료된 후에 수행하게 된다.</li>
</ul>
<h3 id="비동기식-입출력-과정">비동기식 입출력 과정</h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">비동기식 입출력에서는 CPU의 제어권이 입출력을 요청한 프로세스에게 곧바로 다시 주어지게 되며, 입출력 연산이 완료되는 것과 무관하게 처리 가능한 작업부터 시작한다.</span><br><span class="line"></span><br><span class="line">한편, 비동기식 입출력에서도 입출력 연산이 완료도면 동기식과 맟나가지로 인터럽트를 통해 이를 CPU에게 알려주게 된다. 그러면 그 시점부터 읽어온 데이터를 필요로 하는 명령을 수행하게 할 수 있게 된다.</span><br></pre></td></tr></table></figure>
<h1 id="dmadirect-memory-access">DMA(Direct Memory Access)</h1>
<hr>
<ul>
<li>원칙적으로 메모리는 CPU에 의해서만 접근 가능한 장치이다.<br>
따라서, 주변 장치들이 메모리에 접근하기 위해서는 CPU에게 입터럽트를 발생시켜 CPU가 일을 대행하는 식으로만 가능하다.<br>
즉, 컨트롤러가 CPU에게 인터럽트를 발생시키면 CPU는 컨트롤러의 로컬 버퍼와 메모리 사이에서 데이터를 옮겨 주는 일을 하게 된다.</li>
<li>모든 메모리 접근 연산이 CPU에 의해서만 이뤄질 경우에는 CPU의 업무가 방해를 받아 효율성이 떨어지는 문제점이 발생한다.</li>
<li>이러한 비효율성을 극복하기 위해 CPU 이외의 메모리 접근이 가능한 장치를 하나 더 두는 경우가 많은데 이와 같은 장치를 <strong>DMA</strong>라고 부른다.</li>
<li>DMA는 로컬 버퍼에서 메모리로 읽어오는 작업을 진행한 후 CPU에게 인터럽트를 발생시켜 해당 작업의 완료를 알려준다.</li>
<li>DMA는 바이트 단위가 아니라 <strong>블록</strong>이라는 큰 단위로 데이터를 메모리로 읽어 온다.</li>
<li>이런 방식으로 CPU에 발생하는 인터럽트의 빈도를 줄여 CPU의 효율성을 높일 수 있게 된다.</li>
</ul>
<h1 id="저장-장치의-구조">저장 장치의 구조</h1>
<hr>
<ul>
<li>컴퓨터 시스템을 구성하는 저장 장치는 <strong>주 기억 장치</strong>와 <strong>보조 기억 장치</strong>로 나눌 수 있다.</li>
</ul>
<h2 id="주-기억-장치">주 기억 장치</h2>
<ul>
<li>보통 <strong>메모리</strong>라 부르며 전원이 나가면 저장되었던 내용이 모두 사라져 버리는 휘방성이다.<br>
Ex)RAM을 매체로 사용하는 경우가 대부분이다.</li>
</ul>
<h2 id="보조-기억-장치">보조 기억 장치</h2>
<ul>
<li>전원이 나가도 저장된 내용을 기억할 수 있는 비휘발성<br>
Ex)플래시 메모리, CD, 마그네틱 테이프 등등</li>
</ul>
<p><strong>보조 기억 장치의 용도는 크게 2가지로 구분된다.</strong></p>
<ol>
<li>
<p>파일 시스템용</p>
<ul>
<li>전원 Off시 유지해야 할 정보가 있으면 그것을 파일 형태로 보조 기억 장치에 저장한다.</li>
<li>메모리는 휘발성이므로 비휘발성 매체인 디스크를 파일 시스템용으로 흔히 사용한다.</li>
</ul>
</li>
<li>
<p>메모리의 연장 공간인 <strong>스왑 영역</strong>용(Swap)</p>
<ul>
<li>OS는 프로그램 수행에 당장 필요한 부분만 메모리에 올려 놓고 나머지는 디스크의 스왑 영역에 내려놓게 된다.</li>
<li>디스크에 내려놓는 일을 <strong>스왑 아웃</strong>이라고 말한다.</li>
<li>스왑 아웃된 부분이 필요 시 다시 메모리 영역에 올린다.</li>
<li>스왑 영역은 프로그램이 실행 시 내용을 저장했다가 프로그램이 종료될 때 삭제하는 메모리의 연장 공간으로서의 역할을 담당한다.</li>
<li>파일 시스템처럼 비휘발성 용도로 사용되는 것과는 역할이 구분된다.</li>
</ul>
</li>
</ol>
<h1 id="저장-장치의-계층-구조">저장 장치의 계층 구조</h1>
<hr>
<img src="/img/storage_os.png" width="400" height="200">
<ul>
<li>주 기억 장치와 보조 기억 장치로 나눌 수 있다.</li>
<li>주 기억 장치 : 비쌈 / 빠름 / 용량이 적음 / 휘발성</li>
<li>보조 기억 장치 : 저렴 / 느림 / 용량이 많은 / 비휘발성</li>
</ul>
<h1 id="하드웨어의-보안">하드웨어의 보안</h1>
<hr>
<ul>
<li>우리가 흔히 사용하는 OS는 여러 프로그램이 동시에 실행될 수 있는 다중 프로그래밍 환경에서 동작한다. 그러므로 각 프로그램들이 다른 프로그램의 실행을 방해하거나 서로 충돌을 일으키는 문제를 막기 위해 HW에 대한 각종 보안 기법이 필요하다.</li>
<li>HW 보안을 유지하기 위해 OS는 기본적으로 두 가지 모드의 <strong>오퍼레이션</strong>을 지원한다.</li>
</ul>
<h2 id="커널-모드kernel-mode">커널 모드(Kernel Mode)</h2>
<ul>
<li>CPU 내부의 모드 비트가 0인 상태이다.<br>
OS가 CPU의 제어권을 갖고 OS 코드를 실행하는 모드로서, 모든 종류의 명령을 다 실행할 수 있다.</li>
<li>중요한 정보에 접근해 위험한 상황을 초래할 수 있는 연산은 <strong>커널 모드</strong>에서만 실행되도록 하여 보안성을 확보한다.</li>
<li>시스템의 보안과 관련된 명령들을 <strong>특권 명령</strong>이라 하며, 모든 비트가 0일 때만 수행 가능하다. 즉, 특권 명령을 커널 모드에서 OS에 의해서만 수행이 가능하다.</li>
</ul>
<h2 id="사용자-모드user-mode">사용자 모드(User Mode)</h2>
<ul>
<li>CPU 내부의 모드 비트가 1인 상태이다.<br>
일반 사용자 프로그램이 실행되며 제한적인 명령만을 수행할 수 있다.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 모드 비트 사용 이유</span><br><span class="line">사용자 프로그램이 프로그램 내에서 시스템에 영향을 끼치는 연산을 수행할 수가 있다. </span><br><span class="line">이 때 사용자 프로그램이 CPU를 가지고 있는 동안에는 OS가 CPU를 선점할 수 없으므로 사용자 프로그램을 감시할 수 있는 방법이 없다.</span><br><span class="line">그렇기 때문에 CPU 내부에 모드 비트를 두어 사용자 프로그램을 감시할 수 있게 된다.</span><br><span class="line"></span><br><span class="line"># 모드 비트 세팅 과정</span><br><span class="line">OS가 CPU를 점유해 자신의 코드를 수행하다 사용자 프로그램에게 CPU의 제어권을 넘길 때 모드 비트를 1로 세팅해 넘긴다.</span><br><span class="line"></span><br><span class="line">사용자 프로그램이 수행되다 HW 접근 등 보안이 필요한 중요한 명령을 수행해야 할 경우에는 시스템 콜을 통해 OS에게 서비스를 대신해 줄 것을 요청하게 된다.</span><br><span class="line"></span><br><span class="line">인터럽트가 발생할 때에는 모드 비트가 0으로 세팅되어 OS는 서비스에 필요한 모든 종류의 명령을 수행할 수 있다.</span><br></pre></td></tr></table></figure>
<h1 id="메모리-보안">메모리 보안</h1>
<hr>
<ul>
<li>여러 프로그램이 동시에 메모리에 올라가서 실행되기 때문에 하나의 사용자 프로그램이 다른 사용자 프로그램이나 OS가 위치한 메모리 영역을 침범할 수 있기 때문에 메모리 보안이 필요하다</li>
<li>2개의 레지스터(기준 레지스터, 한계 레지스터)를 사용해서 프로글매이 접근하려는 메모리 부분이 합법적인지 체크하여 메모리 보호가 이루어진다.</li>
<li>기준 레지스터는 어떤 프로그램이 수행되는 동안 합법적으로 접근할 수 있는 메모리 상의 <strong>가장 작은 주소</strong>를 보관한다.</li>
<li>한계 레지스터는 그 프로그램이 기준 레지스터 값부터 접근할 수 있는 <strong>메모리의 범위</strong>를 보관한다.</li>
<li>즉 어떤 프로그램이 실제 메모리에 올라가 있는 부분의 <strong>시작 주소</strong>와 그 <strong>프로그램의 길이</strong>를 보관해 메모리 접근 연산이 있을 때마다 하드웨어적으로 현재 접근하려는 위치가 <strong>합법적인 범위</strong>인지를 체크한다.</li>
</ul>
<img src="/img/how_computer_systems_work_3.png" width="400" height="200">
<ul>
<li>
<p>사용자 프로그램은 기준 레지스터 + 한계 레지스터 값 사이 주소 영역만 접근이 가능하며, 이 범위 안에 없으면 불법적인 메모리 접근이므로 <strong>예외 상황</strong>이라는 SW 인터럽트를 발생하게 된다.<br>
예외 상황은 OS에게 SW 인터럽트를 발생시켜 CPU의 제어권을 이양시키고 OS는 그 프로그램을 강제 종료시킨다.</p>
</li>
<li>
<p>단, 여기에서 기준 + 한계 레지스터를 통한 메모리 보호 기법은 하나의 프로그램이 메모리의 한 영역에 <strong>연속적</strong>으로 위치하는 경우에 대한 설명이다.<br>
그 박의 하나의 프로그램이 메모리 여러 영역에 나뉘어 위치하는 <strong>페이징</strong> 기법도 존재한다.</p>
</li>
<li>
<p>메모리 접근 연산은 사용자 프로그램이 CPU를 가지고 있는 동안에 수행할 수 있는 연산이므로 특권 명령은 아니다.<br>
다만 사용자 프로그램이 메모리를 접근하기 전에 하드웨어적으로 그 접근이 합법적인지를 체크하여 메모리를 보호한다.<br>
이것이 OS만 수행할 수 있는 <strong>입출력 연산</strong>과 <strong>메모리 접근 연산</strong>과의 차이점이라 할 수 있다.</p>
</li>
<li>
<p>사용자 모드인 경우에는 기준 + 한계 레지스터를 사용해 메모리를 보호하고<br>
커널 모드에서는 메모리에 무제한으로 접근이 가능하다.</p>
</li>
</ul>
<p>[무슨 말일까…? 책으로 보면서 추후에 더 이해하자.]</p>
<h1 id="cpu-보호">CPU 보호</h1>
<hr>
<ul>
<li>일반적으로 CPU는 컴퓨터 내에 하나밖에 존재하지 않기 때문에 특정 프로그램이 CPU를 독점해 무한 박복문을 수행하는 등 부적절한 방법으로 독점한다면 다른 프로그램 및 OS가 CPU의 제어권을 획득할 수 있는 방법이 없게 된다.</li>
<li>OS는 CPU가 하나의 프로그램에 의해 독점되는 것을 막기 위해 <strong>타이머</strong>라는 HW를 사용한다.</li>
<li>타이머는 정해진 시간이 지나면 인터럽트를 발생시켜 OS에게 CPU의 제어권을 이양시키는 역할응 수행한다.</li>
<li>타이머는 <strong>시분할 시스템</strong>에서 현재 시간을 계산하기 위해서도 널리 사용된다.<br>
시분할 시스템이란? 여러 프로그램이 CPU의 시간을 조금씩 나누어 사용하는 시스템을 의미한다.</li>
</ul>
<h1 id="시스템-콜을-이용한-입출력-수행">시스템 콜을 이용한 입출력 수행</h1>
<hr>
<ul>
<li><strong>시스템 콜</strong>은 일종의 SW 인터럽트로 사용자 프로그램이 시스템 콜을 요청할 경우 <strong>트랩</strong>이 발생해 CPU에 대한 제어권이 OS로 넘어가게 된다.</li>
<li>그러면 OS는 해당 시스템 콜을 처리하기 위한 루틴으로 가서 정의된 명령을 수행하게 된다.</li>
</ul>

        </div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
     google_ad_client: "ca-pub-9725307592233286",
     enable_page_level_ads: true
});
</script>
        <footer class="article-footer">
            



    <a data-url="https://woovictory.github.io/2018/12/22/OS-How-Computer-System-Work/" data-id="cjtqzh73g00uoeipq8oaz42xk" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>follow:</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="facebook" href="https://www.facebook.com/WooVictory" target="_blank" rel="noopener">
                        <i class="icon fa fa-facebook"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/WooVictory" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
                
                <li>
                    <a class="social-tooltip" title="linkedin" href="https://www.linkedin.com/in/seungwoo-lee-590844177" target="_blank" rel="noopener">
                        <i class="icon fa fa-linkedin"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/12/23/OS-The-Principle-Of-Interrupt/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">newer</strong>
        <p class="article-nav-title">
        
            [운영체제] 인터럽트의 원리
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2018/12/21/OS-info/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">older</strong>
        <p class="article-nav-title">[운영체제] 운영체제 개요</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">44</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">24</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">34</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>


            
        
    </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
(adsbygoogle = window.adsbygoogle || []).push({
     google_ad_client: "ca-pub-9725307592233286",
     enable_page_level_ads: true
});
</script>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2019 VictoryWoo</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
</footer>

        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'https://woovictory.github.io/2018/12/22/OS-How-Computer-System-Work/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
