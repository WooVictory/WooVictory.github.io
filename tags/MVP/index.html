
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="VictoryWoo">
    <title>Tag: MVP - VictoryWoo</title>
    <meta name="author" content="VictoryWoo">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="VictoryWoo">
<meta property="og:url" content="https://woovictory.github.io/tags/MVP/index.html">
<meta property="og:site_name" content="VictoryWoo">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="VictoryWoo">
    
    
        
    
    
        <meta property="og:image" content="https://woovictory.github.io/assets/images/Victory.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-125410253-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-125410253-1');
    </script>


    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            VictoryWoo
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="Read more about the author"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">VictoryWoo</h4>
                
                    <h5 class="sidebar-profile-bio"><p>기록을 통해 사람들과 공유하는 것을 좋아합니다.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/WooVictory"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/jhsw0375@gmail.com"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/19/Android-MVP-Step11/"
                            aria-label=": [안드로이드] MVP 따라하기 11"
                        >
                            [안드로이드] MVP 따라하기 11
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-19T17:30:01+09:00">
	
		    Jan 19, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="repository">Repository</h2>
<p>Repository 정의는 Memory cache를 할 수 있으며, Remote/Local 데이터를 불러오게 된다. SQLite 사용 시에는 <strong>Loaders</strong> 사용으로 비동기식 데이터를 쉽게 로드할 수 있는 방법을 사용하고, RxJava 등의 방법을 사용할 수 있다. [이 경우는 이번 글에서 다루지 않는다.]</p>
<p>변경할 Repository 형태는 구글이 설명하는 다음의 방법이다.</p>
<img src="/img/model.png" width="600" height="300">
<h2 id="배운-점">배운 점</h2>
<p>Model을 생성해서 Presenter에서 Repository에 데이터를 요청하고 Repository는 Remote / Local DataSource로부터 데이터를 받아서 Repository에게 넘기고 받은 것을 다시 Presenter에 넘겨서 처리하고 있다.</p>
<p>MVP를 처음 배울 때는 '별 거 아니네’라고 생각했다. 하지만, 리싸이클러뷰가 들어있는 하나의 화면을 작성하는데 파일은 많아지고 인터페이스 선언도 많아진다. 그러면서 상속을 받고 이곳 저곳을 왔다 갔다 한다. 너무 복잡스럽다고 생각했지만, 프로젝트의 규모가 조금 커지면 유지 보수에 훨씬 쉬울 것이라는 생각이 들었다. 인터페이스 부분만 수정하고 이를 구현하는 함수만 수정하면 되기 때문이다.</p>
<p>그렇지만 아직 테스트 코드에 용이하다는 것은 직접 해보지 않아서 잘 모르겠다. 부캠하면서 배운다면 조금 더 알 수 있지 않을까 하는 기대를 걸어본다.</p>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2017/01/29/Android-MVP-Google-Architecture-Model/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Google Architecture Model(영상 포함)</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/19/Android-MVP-Step11/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/19/Android-MVP-Step10/"
                            aria-label=": [안드로이드] MVP 따라하기 10"
                        >
                            [안드로이드] MVP 따라하기 10
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-19T14:11:31+09:00">
	
		    Jan 19, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>구글 Architecture에서 설명하는 모델 정의를 살펴보려고 한다.</p>
<ul>
<li><a href="https://github.com/googlesamples/android-architecture/tree/todo-mvp/" target="_blank" rel="noopener">가장 기본적인 Model 정의</a></li>
<li><a href="https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean/" target="_blank" rel="noopener">Clean 코드를 위한 정의</a></li>
</ul>
<p>위와 같이 구분할 수 있는데 기본적인 Model을 정의해야 Clean 코드도 적용해 볼 수 있다. 그래서 이번에 Google Architecture의 가장 기본적인 Model 정의를 살펴보겠다.</p>
<h2 id="model">Model</h2>
<p>구글에서 설명하는 Model은 ios viper라는 개념과 동일하다고 생각하면 될 것 같다. 원래는 Google Architecture clean 코드까지 viper 적용이라고 보이지만 viper와 유사한 형태이다. Interactor에서 Google Repository 역할을 처리하게 된다.</p>
<img src="/img/ios_viper.png" width="600" height="300">
<p>비슷하지만 용어도 다르고, 실제 구성이 다르다…</p>
<h2 id="google-architecture-model">Google Architecture Model</h2>
<p>구글에서 설명하고 있는 Model 정의는 아래와 같다.</p>
<ul>
<li>Repository : 로컬/서버 중 어떤 데이터를 불러올지 정의하고, 메모리 캐시를 포함한다.</li>
<li>Remote data source : 서버에서 데이터를 받아온다.</li>
<li>Local data source : 로컬에서 데이터를 받아온다.</li>
</ul>
<p>가장 기본적으로는 위와 같다. 로컬/서버에서 받아오는 데이터는 Repository에서 캐시 처리할 수 있다. 필요에 따라서 캐리를 하고, 이를 Presenter에 다시 콜백을 해주게 된다. RxJava로 구성을 하면 async / await 형태로 만들어지므로 return Observable/Flowable의 형태가 만들어질 수 있다고 한다… [RxJava는 잘 모르는 내용이다.]</p>
<p>그래서 가장 basic MVP는 아래의 그림을 가진다.</p>
<img src="/img/todo_mvp.png" width="600" height="300">
<p>여기에서 Repository가 왼쪽과 같이 표현될 수 있다. Presenter와 Repository 사이의 데이터를 가공할 수 있는 Loader가 추가될 수도 있고, Clean 코드를 위한 Domain Layout이 포함될 수도 있다.</p>
<p>이런 Loader와 Domain Layout 정의는 Clean 코드를 위한 정의이다. 필요할 경우 추가하여 사용이 가능하다.</p>
<h2 id="todo-mvp">TODO MVP</h2>
<p>모델의 정의는 다음과 같은 형태로 생성된다.</p>
<ul>
<li>Presenter 생성하는 위치에서 Repositroy 생성</li>
<li>Presenter에서 Model(Repository) 포함(setter)</li>
<li>Presenter에서 Model(Repository) 호출</li>
<li>Model(Repository)는 Remote/Local의 데이터를 선택하고 이를 캐시</li>
<li>데이터 호출이 완료되면 Loader 또는 Presenter에서 세팅한 Listener에 값을 전달</li>
</ul>
<p>추가로 Loader의 정의는 아래와 같다.</p>
<img src="/img/todo_mvp_loader.png" width="600" height="300">
<h2 id="repository-interface-정의">Repository interface 정의</h2>
<p>LoadImageCallback을 통해서 성공했을 대와 오류 났을 때를 구분하여 Listener을 추가한다. <strong>RxJava를 사용할 때는 다음이 필요하지 않다.</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ImageSource</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">LoadImageCallback</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onImageLoaded</span><span class="params">(List&lt;PhotoItem&gt; photoItem)</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onDataNotAvailable</span><span class="params">()</span></span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">onLoadFai</span><span class="params">(<span class="keyword">int</span> code, String message)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">getImageItems</span><span class="params">(<span class="keyword">int</span> page, LoadImageCallback loadImageCallback)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ImageSource를 상속받아서 Repository의 Remote/Local DataSource 구분을 하면 된다.</p>
<h2 id="repository">Repository</h2>
<p>Repository은 싱글톤을 통해서 생성하면 된다. 생성자를 통해 Remote/Local DataSource 생성을 하여 사용할 수 있다. kotlin에서는 object class 생성을 통해 처리할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageRepository</span> <span class="keyword">implements</span> <span class="title">ImageSource</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ImageRemoteDataSource imageRemoteDataSource;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ImageRepository <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> LazyHolder.imageSampleRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ImageRepository</span><span class="params">()</span></span>&#123;</span><br><span class="line">        imageRemoteDataSource = ImageRemoteDataSource.getInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">LazyHolder</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ImageRepository imageSampleRepository = <span class="keyword">new</span> ImageRepository;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="remotelocal-datasource">Remote/Local DataSource</h2>
<p>서버/로컬 데이터 소스를 정의할 수 있다. 여기에서는 Local SQLite/Realm DB를 사용하여 구성할 수 있고, Retrofit을 사용하여 서버 데이터를 불러올 수 이다. 역시 DataSource interface 상속을 통해서 정리하면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageRemoteDataSource</span> <span class="keyword">implements</span> <span class="title">ImageSource</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ImageRemoteDataSource INSTANCE;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> FlickrService flickrService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">ImageRemoteDataSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        flickrService = RetrofitCreator.createRetrofit().create(FlickrService.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ImageRemoteDataSource <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (INSTANCE == <span class="keyword">null</span>) &#123;</span><br><span class="line">            INSTANCE = <span class="keyword">new</span> ImageRemoteDataSource();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getImageItems</span><span class="params">(<span class="keyword">int</span> page, <span class="keyword">final</span> LoadImageCallback loadImageCallback)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// 생략</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2017/01/09/Android-MVP-Model-Two/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Google Architecture의 Model</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/19/Android-MVP-Step10/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/19/Android-MVP-Step9/"
                            aria-label=": [안드로이드] MVP 따라하기 9"
                        >
                            [안드로이드] MVP 따라하기 9
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-19T13:40:29+09:00">
	
		    Jan 19, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 MVP 패턴에서 사용할 수 있는 다양한 Model을 살펴보겠다.</p>
<h2 id="model이란">Model이란?</h2>
<p>Model은 Data를 말한다. 단순 데이터가 아닌 데이터를 관리/수집/수정 등을 하게 되는 부분이다. 데이터를 Cache해야 한다면 이 모델에서 Cache 할 수도 있고, 그냥 단순 데이터 전달만 할 수도 있다.</p>
<h2 id="google-architecture의-model">Google Architecture의 Model</h2>
<p>Google Architecture는 아래와 같은 그림으로 설명할 수 있다.</p>
<img src="/img/mvp_model_01.png" width="600" height="300">
<p>각각의 역할은 아래와 같다.</p>
<ul>
<li>Respositroy : Remote/Local을 구분하며, Memory cache를 포함</li>
<li>Remote : 서버를 통한 데이터를 불러온다.</li>
<li>Local : 단말기 상의 SQL, Realm 등을 통한 데이터를 불러온다.</li>
</ul>
<h2 id="구현한-모델은">구현한 모델은?</h2>
<p>현재까지 MVP에서 정의한 모델은 단순 리턴을 하며, Model만 구분을 해두었다. 싱글톤을 통해서 데이터 클래스에 접근하도록 만들었다. 데이터 형태에 따서 여러 개가 만들어질 수도, 단일 클래스로 생성될 수도 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SampleImageData</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SampleImageData</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SampleImageData sampleImageData;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SampleImageData <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (sampleImageData == <span class="keyword">null</span>) &#123;</span><br><span class="line">            sampleImageData = <span class="keyword">new</span> SampleImageData();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sampleImageData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ArrayList&lt;ImageItem&gt; <span class="title">getImages</span><span class="params">(Context context, <span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;ImageItem&gt; items = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">// 생략</span></span><br><span class="line">        <span class="keyword">return</span> items;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위와 같이 자바로 하나의 클래스에 싱글톤으로 만들 수 있다. 가장 기본적인 형태의 모델이다. 코틀린으로 작성할 경우 Object로 작성하면 된다.</p>
<h2 id="presenter에서는">Presenter에서는</h2>
<p>위에서 작성한 모델은 Presenter에서 세팅하는 주체는 <strong>View</strong>이다. Presenter 초기화하는 대상이 View이기 때문에 View를 초기화함과 동시에 Model을 초기화하게 된다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">presenter = MainPresenter().apply &#123;</span><br><span class="line">		view = <span class="keyword">this</span><span class="symbol">@MainActivity</span></span><br><span class="line">		imageData = ImageData</span><br><span class="line">		adapterModel = imageAdapter</span><br><span class="line">		adapterView = imageAdapter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위와 같이 초기화를 진행하고, Presenter에서 다음과 같이 사용하게 된다. getItems()를 토애서 데이터를 불러오고 이를 사용하게 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadItems</span><span class="params">(Context context, <span class="keyword">boolean</span> isClear)</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;ImageItem&gt; items = sampleImageData.getImages(context, <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">if</span> (isClear) &#123;</span><br><span class="line">        adapterModel.clearItem();</span><br><span class="line">    &#125;</span><br><span class="line">    adapterModel.addItems(items);</span><br><span class="line">    adapterView.notifyAdapter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/12/29/Android-MVP-Model-One/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Model 정의하기</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/19/Android-MVP-Step9/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/18/Android-MVP-Step8/"
                            aria-label=": [안드로이드] MVP 따라하기 8"
                        >
                            [안드로이드] MVP 따라하기 8
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-18T20:58:46+09:00">
	
		    Jan 18, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는  8번째 시간이다. ㅎㅎ 지난번에 태환님의 동영상 강의를 보면서 AdapterContract 정의를 했고, 이어서 OnClickListener 정의를 해보려고 한다.</p>
<h2 id="adaptercontract-view-onclicklistener-정의">AdapterContract View - OnClickListener 정의</h2>
<p>OnClickListener 정의는 AdapterContract View에 추가 정의를 통해 간단하게 구현할 수 있다. 기존에 AdapterContact.View에는 다음과 같이 정의했다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ImageAdapterContract</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">notifyAdapter</span><span class="params">()</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>여기에 <code>setOnClickListener(OnClickListener listener)</code> 정의를 추가함으로써 <strong>Presenter</strong>에서 바로 Adapter의 OnClickListener 이벤트를 전달받고, 이를 처리할 수 있게 된다.</p>
<p>이유는 간단하다.</p>
<ul>
<li>AdapterModel / AdapterView를 Presenter에서 들고 있기 때문에 굳이 View에서 이런 이벤트를 받을 필요는 없다. 역시나 귀찮은 부분이 따르므로 아래이 그림과 같이 추가될 수 있다.</li>
</ul>
<img src="/img/mvp_01.png" width="600" height="300">
<h2 id="adaptercontract-view를-통해서-초기화하는-이유는">AdapterContract View를 통해서 초기화하는 이유는??</h2>
<p><strong>AdapterContract.View</strong>에서 OnClick을 초기화하고, 이를 ViewHolder에서 정의하는 이유는 다음과 같다.</p>
<ul>
<li>이미 Presenter에서 AdapterView/AdapterModel을 알고 있다.</li>
<li>실제 View/Model을 한 번에 가지고 있는 Adapter이기 때문에 이를 굳이 View에서 처리할 필요는 없다.</li>
</ul>
<p>위와 같은 이유로 다시 View에서 setOnClickListener을 하고 이 이벤트를 받아서 Presenter에 넘겨서 처리를 하는 것보다는 바로 Presenter가 받아서 이를 처리하고, View 이벤트를 분리하는게 편리하기 때문이라고 한다. 그래서 이 방법은 배워보도록 하겠다.</p>
<p>해당 View에서도 onClick 처리를 할 수 있지만, Presenter에서 onClick을 들고 있기 때문에 Presenter에서 다양한 이벤트 처리를 바로 할 수 있기 때문에 한 단계 줄여서 <strong>바로 Presenter setOnClickListener를 만들어주고</strong> 그걸 Adapter에 등록을 시켜주면 onClick이 발생을 했을 때, 이외 처리가 좀 더 간단하게 만들어질 수 있다.</p>
<h2 id="배운-점">배운 점</h2>
<p>Presenter가 View, adapterView, adapterModel을 가지고 있고, context도 보유하고 있으므로 여기서 onClick을 처리할 수 있는 것이다. 굳이 View에서 처리하지 않아도 된다는 뜻인 셈이다.</p>
<p>ImageAdapterContract.View에 <code>var onClickFunc : ((Int) -&gt; Unit)?</code> 을 선언해준다. 이는 코틀린의 특성 중 하나로 변수에 바로 사용할 함수를 담는 것이다. 이렇게 하면 Adapter는 ImageAdapterContract.View를 구현하기 때문에 Adapter에서는 onClickFunc 변수를 오버라이드 한다.</p>
<p>그리고 onBindViewHolder의 역할을 ImageViewHolder의 onBind에서 처리하고 있으므로 onClick에 대한 이벤트 처리도 <strong>ImageViewHolder</strong>에 위임하여 처리를 넘겨준다. [이 부분도 어댑터에서 진행하는 부분이다.]</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">onBind</span><span class="params">(item: <span class="type">ImageItem</span>, position: <span class="type">Int</span>)</span></span>&#123;</span><br><span class="line">     ImageAsync(context,imageView).execute(item.resource)</span><br><span class="line">     textView.text = item.title</span><br><span class="line">     itemView.setOnClickListener &#123;</span><br><span class="line">         onClickFunc?.invoke(position)</span><br><span class="line">         <span class="comment">// int를 변수로 넘겨줘야 하기 때문에</span></span><br><span class="line">         <span class="comment">// null이 아닌 경우를 체크하고 int인 position을 넘겨준다.</span></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>그러면 itemView에 대한 클릭이 발생했을 때, onClickFunc은 null이 아닌 경우를 체크하고 position을 넘겨준다. 넘어간 position은 아래와 같은 코드를 통해서 받는다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> adapterView: ImageAdapterContract.View? = <span class="literal">null</span></span><br><span class="line">        <span class="keyword">set</span>(value) &#123;</span><br><span class="line">            field = value</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 아래 부분 중요</span></span><br><span class="line">            field?.onClickFunc = &#123; onClickListener(it)&#125;</span><br><span class="line">            <span class="comment">// 위와 같이 지정을 해주면 onClick이 발생하면 아래의 함수가 동작한다.</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// onClick시 아래 함수 동작 </span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">onClickListener</span><span class="params">(position: <span class="type">Int</span>)</span></span>&#123;</span><br><span class="line">        adapterModel.getItems(position).let &#123;</span><br><span class="line">            view.showToast(it.title)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>set block 안에서 position을 it으로 받아서 onClickListener 함수를 호출한다. onClickListener는 다시 adapterModel에게 getItem을 요청한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">getItems</span><span class="params">(position: <span class="type">Int</span>)</span></span>: ImageItem = imageList[position]</span><br></pre></td></tr></table></figure>
<p>위와 같은 로직으로 Adapter에서 onClick 이벤트를 처리할 수 있다. 조금 복잡하지만, 익숙해진다면 로직을 분리할 수 있는 장점과 결합도를 낮출 수 있을 것 같다.</p>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/12/29/Android-MVP-Four-Three/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Adapter OnClick 정의하기(동영상)</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/18/Android-MVP-Step8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/18/Android-MVP-Step7/"
                            aria-label=": [안드로이드] MVP 따라하기 7"
                        >
                            [안드로이드] MVP 따라하기 7
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-18T18:05:31+09:00">
	
		    Jan 18, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="다음을-정리">다음을 정리</h2>
<p>이전 영상을 보면서 배웠던 내용은 View -&gt; Presenter -&gt; Model -&gt; Presenter -&gt; View -&gt; Adapter을 정의하였다. 오늘은 아래 그림과 같이 View -&gt; Presenter -&gt; Model -&gt; Presenter -&gt; Adapter View/Model을 바로 갱신하게 된다. 그래서 Activity/Fragment의 View를 한 단계 더 분리하고, 이를 좀 더 편하게 관리하기 위함이다.</p>
<img src="/img/mvp_adapter_contract.png" width="600" height="300">
<h2 id="생각해보기">생각해보기</h2>
<p>MVP를 공부하면서 이번에는 <strong>AdapterContract</strong>를 분리해서 그 안에 View와 Model을 만들었다. 이렇게 함으로써 View를 거쳐서 Adapter에 접근해야 하는 과정을 줄이고 Presenter에서 Adapter로 바로 update하거나 notify 하도록 함으로써 결합도를 낮출 수 있었다.</p>
<p>하지만 내가 아직 이해가 잘 되지 않는 부분이 있다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> presenter : MainPresenter</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> imageAdapter : ImageAdapter</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    setContentView(R.layout.activity_main)</span><br><span class="line">    setSupportActionBar(toolbar)</span><br><span class="line">    toolbar.setOnClickListener(<span class="keyword">this</span>)</span><br><span class="line"></span><br><span class="line">    imageAdapter = ImageAdapter(<span class="keyword">this</span>)</span><br><span class="line">    recycler_view.adapter = imageAdapter</span><br><span class="line"></span><br><span class="line">    presenter = MainPresenter().apply &#123;</span><br><span class="line">        view = <span class="keyword">this</span><span class="symbol">@MainActivity</span></span><br><span class="line">        imageData = SampleImageData</span><br><span class="line">        adapterModel = imageAdapter</span><br><span class="line">        adapterView = imageAdapter</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>이 부분은 View에서 Presenter를 사용하는 부분이다. View에서 데이터를 Presenter에게 요청하기 위함이다. 여기서 <code>adapterModel = imageAdapter</code> 이 부분이 나한테는 관건이었다.</p>
<p>분명 adapterModel은 MainPresenter에 정의되어 있고 타입은 ImageAdapterContract.View이다. 그런데 imageAdapter를 대입함으로써 초기화를 진행하고 있다.</p>
<p>깊게 생각해보고 구조를 손으로 그려보니 이해가 갔다. ImageAdapter는 ImageAdapterContract.View, ImageAdapterContract.Model을 상속 받고 있다. 즉, ImageAdapterContract가 부모 또는 상위가 되는 것이고 그를 상속받는 ImageAdapter는 자식 또는 서브가 되는 것이다. 그래서 자식은 상속을 통해서 부모의 메소드를 사용할 수 있는 것처럼 부모 객체에 자식 객체를 대입함으로써 자식 객체의 메소드에 접근할 수 있는 것이라고 생각을 했다.</p>
<p>혹시나 나의 생각이 잘못되었다면 메일이나 댓글을 부탁한다.</p>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/12/27/Android-MVP-Four-Two/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Adapter Contract 정의하기 2번째(동영상)</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/18/Android-MVP-Step7/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/18/Android-MVP-Step6/"
                            aria-label=": [안드로이드] MVP 따라하기 6"
                        >
                            [안드로이드] MVP 따라하기 6
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-18T12:05:53+09:00">
	
		    Jan 18, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 Adapter에 대한 Contract 정의하는 방법을 살펴보려 한다. 여기서는 Adapter에 대한 Contract를 정의하고 이를 상속받아서 사용하는 방법을 정리해보겠다.</p>
<h2 id="adapter-contract-정의란">Adapter Contract 정의란?</h2>
<p>이전 글에서 Activity/Fragment에서 사용할 Contract을 정의하고, 분리해보았다. 하지만 아래와 같이 처리한다.</p>
<img src="/img/mvp_adapter.png" width="600" height="300">
<p>복잡해보이지만 정리하면 아래와 같다.</p>
<ul>
<li>View : Presenter에게 데이터를 요청</li>
<li>Presenter : Model에게 데이터를 요청</li>
<li>Model : 데이터를 Presenter로 전달</li>
<li>Presenter : Model로부터 전달받은 데이터를 View에게 전달</li>
<li>View : View에서 가지고 있던 Adapter에게 데이터를 추가하고, notify를 처리</li>
</ul>
<h2 id="presenter에서-직접-data를-전달하지-않으면">Presenter에서 직접 data를 전달하지 않으면?</h2>
<p>MVP 방식을 분리만 하면 위에서 설명한 그림과 같이 동작한다. 그럼 단점은 무엇일까??</p>
<p><strong>단점</strong><br>
Presenter에서 Adapter의 데이터를 저장하고 불러오는 모든 부분에 항상 View가 함께 해야 한다.</p>
<ul>
<li>Presenter에서 Adapter에 데이터를 세팅하는 경우
<ul>
<li>View에서 이를 전달받아 Adapter에 저장</li>
</ul>
</li>
<li>사용자의 onClick 시에 필요한 데이터를 Adapter로부터 전달받아야 하므로 필요한 함수(getItem)가 만들어져야 한다.</li>
</ul>
<p>위와 같은 상황이 아니더라도 모두 View에서 이를 대신 받아서 전달해야 한다. 그럼 복잡도를 낮추려는 목적이 사라짐과 동시에 복잡도가 높아지고 귀찮아진다.</p>
<h2 id="그래서-좀-더-좋은-방법은">그래서 좀 더 좋은 방법은??</h2>
<p>좀 더 좋은 방법은 GDE 스티브님의 글에서 소개된 방법이다. 이 글은 아래에 참고 링크를 걸어두었으니 나중에 확인해보자!</p>
<p>다음과 같이 Adapter에 대한 Contract를 다시 생성해준다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">AdapterContract</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Model</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="contract을-adapter에-상속받아-구현">Contract을 Adapter에 상속받아 구현</h2>
<p>View/Model을 구분해서 Contract을 생성하였으니, Adapter에서 이를 상속받아서 구현해준다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleAdapter</span> : <span class="type">RecyclerView.Adapter</span></span>(), AdapterContract.View, AdapterContract.Model&#123;</span><br><span class="line">    <span class="comment">// 생략</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="presenter에서는">Presenter에서는?</h2>
<p>Presenter에서는 AdapterContract.View와 AdapterContract.Model을 구현한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SamplePresenter</span> <span class="keyword">implements</span> <span class="title">SampleContract</span>.<span class="title">Presenter</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AdapterContract.View adapterView;</span><br><span class="line">    <span class="keyword">private</span> AdapterContract.Model adapterModel;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdapterView</span><span class="params">(AdapterContact.View adapterView)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.adapterView = adapterView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdapterModel</span><span class="params">(AdapterContract.Model adapterModel)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.adapterModel = adapterModel</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이렇게 구현해주면 이후에는 adapterVie/adapterModel을 통해서 직접 Adapter를 접근하게 된다. 기존에서와 같이 View를 통해서 접근할 필요성이 없어진다. 그래서 다시 그리면 아래와 같다.</p>
<img src="/img/mvp_adapter_contract.png" width="600" height="300">
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/12/26/Android-MVP-Four/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Adapter Contract 정의하기</a></li>
<li><a href="https://medium.com/@jsuch2362/adapter-%EB%88%84%EA%B5%AC%EB%83%90-%EB%84%8C-data-view-2db7eff11c20" target="_blank" rel="noopener">Adapter, 누구냐 넌? — Data? View?</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/18/Android-MVP-Step6/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/17/Android-MVP-Step5/"
                            aria-label=": [안드로이드] MVP 따라하기 5"
                        >
                            [안드로이드] MVP 따라하기 5
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-17T09:32:11+09:00">
	
		    Jan 17, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 참고하는 블로그의 태환님께서 영상 올리신걸 참고하여 Presenter를 분리하는 방법을 배웠다.</p>
<p>이를 기반으로 코틀린 주요 코드를 작성했지만, 현재(2019.01.30) 자바를 이용해 프로젝트를 진행하고 있고, MVP를 적용해야 하기 때문에 한 번 더 공부를 해서 주요 코드를 작성하고자 한다.</p>
<h2 id="java의-주요-코드">Java의 주요 코드</h2>
<p><strong>MainContractor 정의</strong></p>
<p>MainContractor는 View와 Presenter에 대한 인터페이스를 정의한다. 이해하는데 용이하게 하기 위한 용도이다.</p>
<ul>
<li>View 인터페이스에는 Presenter로부터 가공된 데이터를 받고 UI를 갱신하는 로직이 필요하다.</li>
<li>Presenter 인터페이스에는 View로부터 이벤트를 받고 데이터를 가공하는 로직이 필요하다. 그리고 View로 데이터를 넘겨줘야 한다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MainContractor</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">addItems</span><span class="params">(ArrayList&lt;ImageItem&gt; list, Boolean isClear)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">notifyAdapter</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Presenter</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">attachView</span><span class="params">(View view)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">detachView</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setSampleImageData</span><span class="params">(SampleImageData data)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">loadItems</span><span class="params">(Context context, Boolean isClear)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>MainPresenter 주요 코드</strong></p>
<ul>
<li>Presenter는 View를 들고 있는다. View에게 가공된 데이터를 넘기기 위해서 View를 들고 있는 것이다. 또한, 여기서는 데이터를 세팅하는 과정까지 포함하고 있다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> MainContractor.View view;</span><br><span class="line"><span class="keyword">private</span> SampleImageData sampleImageData;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">attachView</span><span class="params">(MainContractor.View view)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.view = view;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Overrid</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">detachView</span><span class="params">()</span></span>&#123;</span><br><span class="line">    view = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSampleImageData</span><span class="params">(SampleImageData sampleImageData)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.sampleImageData = sampleImageData;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>MainPresenter의 loadItems 코드</strong></p>
<ul>
<li>그리고 loadItems는 View에서 Presenter의 loadItems 함수를 호출한다. 그러면 Presenter에서는 이미지 데이터를 가져와서 view의 addItems와 notifyAdapter 함수를 호출함으로써 View에게 update된 데이터를 넘겨준다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loadItems</span><span class="params">(Context context, Boolean isClear)</span> </span>&#123;</span><br><span class="line">      ArrayList&lt;ImageItem&gt; imageItemList = sampleImageData.getSampleList(context, <span class="number">10</span>);</span><br><span class="line">      view.addItems(imageItemList, isClear);</span><br><span class="line">      view.notifyAdapter();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><strong>MainActivity 주요 코드</strong></p>
<ul>
<li>MainActivity에서는 Presenter를 들고 있다. 그리고 Presenter의 loadItems 함수를 호출한다. 그러면 Presenter에서는 데이터를 가공하고 View에게 전달하는 로직을 가지고 있다. 아래는 loadItems()를 호출하는 부분이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mMainPresenter = <span class="keyword">new</span> MainPresenter();</span><br><span class="line">mMainPresenter.attachView(MainActivity.<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">mMainPresenter.setSampleImageData(SampleImageData.getInstance());</span><br><span class="line"></span><br><span class="line">mMainPresenter.loadItems(<span class="keyword">this</span>, <span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>
<p><strong>UI 갱신을 위한 주요 코드</strong></p>
<ul>
<li>UI 갱신을 위한 부분은 addItems()와 notifyAdapter() 부분이다. 이 함수는 결국 Presenter에 loadItems()를 호출하고 Presenter가 View에게 데이터를 전달하고 View에서 UI 갱신이 일어나는 과정이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addItems</span><span class="params">(ArrayList&lt;ImageItem&gt; items, <span class="keyword">boolean</span> isClear)</span> </span>&#123;</span><br><span class="line">	 <span class="keyword">if</span> (isClear) &#123;</span><br><span class="line">			 imageAdapter.clear();</span><br><span class="line">	 &#125;</span><br><span class="line">	 imageAdapter.setImageItems(items);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyAdapter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	 imageAdapter.notifyDataSetChanged();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="kotlin의-주요-코드">Kotlin의 주요 코드</h2>
<p><strong>MainContract 정의</strong><br>
Kotlin에서 사용 가능한 interface 정의를 다음과 같이 한다. var view, var ImageData를 정의한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MainContract</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line">        <span class="comment">// View의 UI 갱신을 위한 메소드</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">updateItems</span><span class="params">(items : <span class="type">ArrayList</span>&lt;<span class="type">ImageItem</span>&gt;, isClear : <span class="type">Boolean</span>)</span></span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">notifyAdapter</span><span class="params">()</span></span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Presenter</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> view : view</span><br><span class="line">        <span class="keyword">var</span> imageDat : SampleImageData</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Model에 접근하기 위한 메소드</span></span><br><span class="line">        <span class="function"><span class="keyword">fun</span> <span class="title">loadItems</span><span class="params">(context : <span class="type">Context</span>, isClear : <span class="type">Boolean</span>)</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>MainPresenter 정의</strong><br>
그리고 <code>lateinit</code>을 통해서 변수를 선언한다.<br>
자바에서는 이때 setView/getView가 자동으로 생성된다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lateinit</span> <span class="keyword">override</span> <span class="keyword">var</span> view: MainContract.View</span><br><span class="line"><span class="keyword">lateinit</span> <span class="keyword">override</span> <span class="keyword">var</span> imageData: ImageData</span><br></pre></td></tr></table></figure>
<p>그리고 loadItems을 아래와 같이 생성한다. updateItems와 notifyAdapter을 각각 호출해주어서 UI를 갱신한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">loadItems</span><span class="params">(context: <span class="type">Context</span>, isClear: <span class="type">Boolean</span>)</span></span> &#123;</span><br><span class="line">    imageData.getSampleList(context, <span class="number">10</span>).let &#123;</span><br><span class="line">        view.updateItems(it, isClear)</span><br><span class="line">        view.notifyAdapter()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>MainActivity 정의</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">privaet <span class="keyword">lateinit</span> <span class="keyword">var</span> presenter : MainPresenter</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstancesState: <span class="type">Bundle</span>?)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    presenter = MainPresenter().apply&#123;</span><br><span class="line">        view = <span class="keyword">this</span><span class="symbol">@MainActivity</span></span><br><span class="line">        imageData = SampleImageData</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    presenter.loadItems(context, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>그리고 presenter로부터 View에 대한 콜백을 다음과 같이 처리한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">updateItems</span><span class="params">(items: <span class="type">ArrayList</span>&lt;<span class="type">ImageItem</span>&gt;, isClear: <span class="type">Boolean</span>)</span></span> &#123;</span><br><span class="line">    imageAdapter?.apply &#123;</span><br><span class="line">        <span class="keyword">if</span> (isClear) &#123;</span><br><span class="line">            imageList?.clear()</span><br><span class="line">        &#125;</span><br><span class="line">        imageList = items</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">notifyAdapter</span><span class="params">()</span></span> &#123;</span><br><span class="line">    imageAdapter?.notifyDataSetChanged()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="느낀점">느낀점</h2>
<p>MVP로 나아가기 위해서 조금씩 걸어가고 있다. 하지만 아직 어려운 건 사실이다. 익숙해지기 위해서는 더 많이 코드를 짜보고 생각을 해봐야 할 것 같다.</p>
<p>MVC가 보기에는 편하다. 몇 줄 적지 않았던 코드는 길게 늘어났고, 클래스도 많아졌다. 아직 MVP라고 하기엔 거리가 멀지만 단순히 생각해보면 Activity에서 Model을 분리했다?? 라는데 아니라고 보일지도 모른다. 그래도 최소한 View/Model 간의 결합도를 낮출 수 있고, View/Model에 대한 테스트도 가능하다.</p>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/12/23/Android-MVP-Three/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Presenter 분리하기(동영상)</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/17/Android-MVP-Step5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/16/Android-MVP-Step4/"
                            aria-label=": [안드로이드] MVP 따라하기 4"
                        >
                            [안드로이드] MVP 따라하기 4
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-16T22:36:24+09:00">
	
		    Jan 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 MVP 따라하기 4번째 시간이다. 저번 글에서 Android MVP 적용하는 방법 중 구글에서 추천하는 Presenter / View 인터페이스를 Contract 인터페이스에 선언해서 사용하는 방법을 다루었다.</p>
<p>이번에는 Presenter/PresenterImpl을 구현하는 방법을 살펴보려고 한다.</p>
<h2 id="presenter-interface-구현하기-전에">Presenter interface 구현하기 전에</h2>
<p>이전 글에서는 구글에서 추천하는 방법인 <strong>Contract</strong>을 통해서 interface을 구현하는 방법을 살펴보았고, 구글의 MVP 패턴 적용하는 방법을 살펴보았다.</p>
<p>여기서는 많이 사용되는 2번째 방법을 소개하려 한다.</p>
<ul>
<li>Presenter : interface로 구현하며, View를 포함</li>
<li>PresenterImpl : Presenter interface를 상속받아서 구현</li>
</ul>
<p>이번 글에서도 기존과 같은 방식으로 접근하지만 interface 생성하는 방법을 달리하였다.</p>
<img src="/img/My_Architecture.png" width="600" height="300">
<h2 id="present-interface-구현">Present interface 구현</h2>
<p>구글은 Contract을 통해서 <code>View/Presenter</code>의 interface 2개를 작성하였지만, 다음의 방법은 Presenter에 View interface만을 작성하였다. 그래서 구현하면 아래와 같다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SamplePresenter</span></span>&#123;</span><br><span class="line">    <span class="comment">// Presenter 구현</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">loadItem</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line">        <span class="comment">// 해당 Presenter에서 사용할 View 구현</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">updateView</span><span class="params">(List&lt;Items&gt; items)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="presenterimpl-구현">PresenterImpl 구현</h2>
<p>다음과 같이 implements를 통해서 상속받고, 이를 아래와 같이 구현한다. 다만 이름은 implements의 구현체의 이름으로 <strong>Impl</strong>을 사용한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SamplePresenterImpl</span></span>(<span class="keyword">val</span> view : SamplePresenter.View) : SamplePresenter&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 상속받은 interface 구현</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">loadItem</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">val</span> list = ArrayList&lt;String&gt;()</span><br><span class="line">        view.updateView(lise)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="view-구현">View 구현</h2>
<p>SamplePresenter인 <strong>SamplePresenterImpl</strong>을 초기화하여 사용한다. 사용법은 Contract을 통한 생성과 동일하다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">SamplePresenter</span>.<span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> SamplePresenter presenter;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">		presenter = <span class="keyword">new</span> SamplePresenterImpl(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">		presenter.loadItem();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateView</span><span class="params">(List&lt;Items&gt; items)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// UI 갱신</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="presenter-interface가-없는-경우">Presenter interface가 없는 경우</h2>
<p>추가로 <strong>Presenter interface</strong>을 사용하지 않는 경우이다. Presenter에 대한 interface을 사용하지 않기 때문에 View에 대한 interface만을 정의한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">SampleView</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">updateView</span><span class="params">(<span class="keyword">var</span> items : <span class="type">List</span>&lt;<span class="type">Items</span>&gt;)</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>그리고 다음과 같이 Presenter를 구현한다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SamplePresenter</span></span>(<span class="keyword">val</span> view : SampleView)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">loadItem</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">val</span> list = ArrayList&lt;String&gt;()</span><br><span class="line">        view.updateView(list)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>그리고 다음과 같이 View의 사용이 가능하게 된다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleActivity</span> : <span class="type">AppCompatActivity</span>, <span class="type">SampleView&#123;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> presenter : SamplePresenter</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(<span class="keyword">var</span> savedInstanceState : <span class="type">Bundle</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        presenter = SamplePresenter(<span class="keyword">this</span>)</span><br><span class="line">        presenter.loadItem()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">updateView</span><span class="params">(<span class="keyword">var</span> items : <span class="type">List</span>&lt;<span class="type">Items</span>&gt;)</span></span>&#123;</span><br><span class="line">        <span class="comment">// UI 갱신</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/11/30/Android-MVP-Two/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Presenter/View 생성하기 Other</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/16/Android-MVP-Step4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/16/Android-MVP-Step3/"
                            aria-label=": [안드로이드] MVP 따라하기 3"
                        >
                            [안드로이드] MVP 따라하기 3
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-16T20:34:22+09:00">
	
		    Jan 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 Presenter와 View를 나누는 방법에 대해서 정리해보겠다.</p>
<h2 id="presenter의-정의는">Presenter의 정의는?</h2>
<ul>
<li>View : Presenter에서 전달받은 View의 이벤트이다.</li>
<li>Presenter : View에서 전달된 이벤트에 대한 처리를 한다.(View와 무관한 처리만 한다.)</li>
</ul>
<img src="/img/mvp_default.png" width="500" height="300">
<h2 id="presenter를-구분하는-방법들">Presenter를 구분하는 방법들</h2>
<ol>
<li>View에 대한 interface만 정의하는 방법</li>
</ol>
<ul>
<li>interface View : View에 대한 interface만 정의</li>
<li>Presenter : interface 정의 없이 함수를 생성하여 사용</li>
<li>View : interface View를 상속받아서 정의</li>
</ul>
<ol start="2">
<li>Google architecture를 따른다.</li>
</ol>
<ul>
<li>Contract : View와 Presenter에 대한 interface을 작성</li>
<li>Presenter : Contract.Presenter을 상속받아서 구현</li>
<li>View : Contract.View을 상속받아서 구현</li>
</ul>
<ol start="3">
<li>PresenterImpl을 구현</li>
</ol>
<ul>
<li>Presenter : Presenter와 View에 대한 interface을 구현</li>
<li>PresenterImpl : Presenter을 상속받아서 구현</li>
<li>View : Presenter.View을 상속받아서 구현</li>
</ul>
<p>위와 같이 구현하는 방법은 크게 3가지 정도로 나뉠 수 있다. 정답은 없고 편한 방법과 다른 사람과 공유했을 때의 장/단점을 따져서 작성하면 좋겠다.</p>
<p>interface 정의시의 장점은 처음 보는 사람이 파익이 쉽다이고, 단점은 여기나 interface 정의가 너무 많다는 것이 될 수 있습니다. 결국, View와 Presenter 간의 통신을 위한 리스너 역할의 interface view에 대한 정의는 처리가 되어야 한다.</p>
<h2 id="googl-architecture을-따르면">Googl Architecture을 따르면</h2>
<p>구글에서 정의하는 Presenter의 생성 방법은 다음과 같다.</p>
<img src="/img/Google_Architecture.png" width="600" height="300">
<ul>
<li>Presenter의 생성은 View가 아닌 실제 View가 만들어지는 시점의 Activity/Fragment/View 등에서 생성을 하고 해당 Presenter에 setView를 실행한다.</li>
<li>setView가 호출되는 시점에 자기 자신(this)을 setPresenter 함수를 통해서 실제 Presenter가 사용되어야 할 View에 전달한다.</li>
<li>View에서는 setPresenter을 통해서 전달받은 Presenter을 가지고 이후 loadItem, OnClickLstener 등의 처리를 한다.</li>
</ul>
<h2 id="여기서-의문점">여기서 의문점</h2>
<blockquote>
<p>Activity만 있는 경우는??</p>
</blockquote>
<ul>
<li>Activity만 있는 경우인데 별도의 View를 생성해야 하는가?</li>
<li>그냥 자기 자신이 받아도 되는가?</li>
</ul>
<p><strong>의문에 대한 대답</strong></p>
<ul>
<li>구글이 제안하는 방법대로라면 - 별도의 View가 있다고 생각하는게 좋겠죠? 코드의 통일성을 위해서 - 자기 자신이 받는 것은 없다고 보면 된다.</li>
</ul>
<p><strong>정리하자면</strong></p>
<ul>
<li>결국 자기 자신이 new Presenter을 처리할 수 있어야 한다.
<ul>
<li>그럼 setPresenter라는 메소드가 필요하지 않게 된다.</li>
</ul>
</li>
<li>Activitiy/Fragment/View 등에서 필요한 경우 Presenter을 생성하고, 자기 자신이 사용할 수 있어야 한다.</li>
</ul>
<h2 id="그럼-어떻게">그럼 어떻게?</h2>
<p>위와 같은 문제점에 대한 제안된 방법은 아래와 같다.</p>
<img src="/img/My_Architecture.png" width="600" height="300">
<ul>
<li>Activity/Fragment/View에서 필요한 Presenter을 직접 생성</li>
<li>setView를 전달한다.</li>
<li>loadItem을 직접 호출</li>
<li>View을 통해서 처리 결과에 다른 View을 갱신한다.</li>
</ul>
<h2 id="contract-구현하기">Contract 구현하기</h2>
<p>이번에는 구글의 <strong>Contract 정의</strong>를 따를 예정이므로 Contract를 구현한다. Contract를 사용하는 이유는 간단하다. <strong>View와 Presenter을 각각 정의하기 위함이며, 이해를 돕기 위한 이유도 있다.</strong></p>
<p>하나의 interface에 View/Presenter을 정의하고, 이를 각각의 View와 Presenter에서 정의하는 방식이다.</p>
<p>먼저 View와 Presenter을 각각 다음과 같이 구현할 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SampleContract</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">View</span></span>&#123;</span><br><span class="line">        <span class="comment">// View method</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">interface</span> <span class="title">Presenter</span></span>&#123;</span><br><span class="line">        <span class="comment">// Presenter method</span></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">setView</span><span class="params">(View view)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="presenter-상속-정의">Presenter 상속 정의</h2>
<p>Presenter는 다음과 같은 방식으로 구현한다.</p>
<p>SampleContract.Presenter을 상속받아서 구현하며, SampleContract.View을 가지게 된다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SamplePresenter</span> : <span class="type">SampleContract.Presenter&#123;</span></span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> view : SampleContract.View? = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">setView</span><span class="params">(view : <span class="type">SampleContract</span>.<span class="type">View</span>)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.view = view</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="view-상속-정의">View 상속 정의</h2>
<p>SampleContract.View를 상속받으면 다음과 같이 정의해주면 된다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">SampleContract</span>.<span class="title">View</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> SampleContract.Presenter presenter;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setContentView(R.layout.activity_main);</span><br><span class="line"></span><br><span class="line">		presenter = <span class="keyword">new</span> SamplePresenter();</span><br><span class="line">		presenter.setView(<span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">		presenter.loadItem();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateView</span><span class="params">(List&lt;Items&gt; items)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// UI 갱신</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/11/28/Android-MVP-One/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - Presenter/View 생성하기</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/16/Android-MVP-Step3/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2019/01/16/Android-MVP-Step2/"
                            aria-label=": [안드로이드] MVP 따라하기 2"
                        >
                            [안드로이드] MVP 따라하기 2
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-01-16T19:43:15+09:00">
	
		    Jan 16, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Android/">Android</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>이번에는 Android MVP 따라하기 두번째 Step으로 <strong>MVC</strong> 구조를 알아보려 한다. MVC 구조로 작성된 코드를 하나씩 <strong>MVP</strong> 구조로 변경하기 위함이다.</p>
<img src="/img/mvc.png" width="500" height="300">
<center>MVC 구조</center>
<p>MVC는 MVP 이전의 구조 중 하나이다. Model, View, Control의 약자로 주로 웹에서 사용되는 구조이다. 그래서 Android에 적용된 구조는 조금 다른 형태로 표현된다.</p>
<h2 id="mvc는">MVC는?</h2>
<p><code>Model, View, Control</code>의 약자이다. MVC는 주로 웹에서 사용하고, 가장 널리 사용되는 구조 중 하나이다. MVC 구조에서의 입력은 모두 <strong>Control</strong>에서 발생하게 되는 구조이다. 이벤트가 발생한 Control에 의해 모듈의 정의와 View의 용도가 결정된다.</p>
<ul>
<li>Model : 데이터를 가진다.</li>
<li>View : 사용자에게 보일 화면을 표현한다.</li>
<li>Control : 사용자로부터 입력을 받고, 이를 모델에 의해 View를 정의하게 된다.</li>
</ul>
<img src="/img/default_mvc.png" width="500" height="300">
<ol>
<li>Control : 사용자 이벤트 발생</li>
<li>Control : 사용자 이벤트가 발생하였는데 갱신이 필요한지 Model에 확인</li>
<li>Model : 데이터 갱신이 필요하다는 이벤트 발생</li>
<li>View : Model 또는 Control로부터 갱신 필요 여부 이벤트를 받는다.</li>
<li>View : Model에서 실제 필요한 데이터를 받아와 View를 갱신</li>
</ol>
<p>위와 같은 5단계 정도로 나열할 수 있을 것이다.</p>
<h2 id="하지만-android에서는">하지만 Android에서는?</h2>
<p>Android에서는 View와 Control이 <code>Activity/Fragment</code> 같은 View들이 모두 가지고 있다. 예를 들면 아래와 같은 코드가 될 수 있다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompactActivity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">    FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);</span><br><span class="line">    fab.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// 데이터 갱신 요청</span></span><br><span class="line">            <span class="comment">// Model에 접근해서 최신 데이터를 요청</span></span><br><span class="line">              <span class="comment">// ex) ArrayList&lt;String&gt; getItems()</span></span><br><span class="line">            <span class="comment">// 전달받은 ArrayList를 통해 View를 갱신</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>하나의 화면 안에서 Control인 setOnClickListener이 발생하고, 이를 View에서 모두 처리하는 형태이다. Web에서 적용된 MVC 패턴은 View와 Control이 모두 분리된 상태를 말한다. 하지만, 안드로이드는 위와 같다. 그래서 그림으로 정리해보면 아래와 같을 수 있다.</p>
<img src="/img/android_mvc.png" width="500" height="300">
<p>간단하게 정리해보면 아래와 같다.</p>
<ol>
<li>Activity에서 사용자 이벤트 발생</li>
<li>Model로부터 데이터 갱신이 필요한지 확인</li>
<li>Model로부터 전달받은 데이터를 통해 View 갱신 여부 판단</li>
<li>View에서 UI 갱신 처리</li>
</ol>
<h2 id="한-화면에서-모든-데이터를-처리함으로써-얻는-장점">한 화면에서 모든 데이터를 처리함으로써 얻는 장점</h2>
<p>Android에서 흔하게 사용되는 MVC는 Class 하나로 처리가 가능한 구조가 만들어지게 된다. 그렇기에 정리만 잘하면 한눈에 코드 파악이 가능할 수 있지만, 어느 정도 범주를 벗어나면 코드 파악이 어렵다. 함수 분리가 안되어 있다면 더욱 그렇다.</p>
<p>그렇기에 함수 분리 또는 Class 분리를 적절하게 해야 복잡도가 낮아질 수 있다. 예를 들면 아래와 같이…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isLast</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> itemList.size() &gt;=<span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>그 외에도 공통으로 분리될 수 있어 보이는 setVisibility()도 여러 번 Visible/Gone이 발생한다면 당연히 함수로 분리한다. 그렇기에 코드 분리만 잘해도 사실 MVC 패턴으로 코드 작성은 문제가 없다.(고 한다… 나는 계속 MVC로 프로젝트를 작성했다.)</p>
<h2 id="장점">장점</h2>
<ol>
<li>개발 기간이 짧을 수 있다.<br>
생각보다 개발 기간이 짧을 수 있다. 생각해야 할 부분도 많지 않고, 그냥 Android Activity에서 모든 걸 동작하게 처리만 해주면 되므로, 개발 기간이 짧을 수 있다.</li>
</ol>
<ol start="2">
<li>코드만 읽을 수 있다면 누구나 쉽게 파악 가능<br>
그리고 처음 보는 사람도 별도의 패턴을 구분하지 않고, 쉽게 파악이 가능하다.</li>
</ol>
<h2 id="단점">단점</h2>
<ol>
<li>코드의 양이 증가<br>
하나의 Class 안에서 모든 걸 할 수 있다. 그로 인해 하나의 Class에서 수백 ~ 수천 줄이 넘는 코드를 발견할 수 있다.</li>
</ol>
<ol start="2">
<li>스파게티 코드 가능성<br>
복사 / 붙여넣기가 많아지고, 코드 분리가 안되어 있다면 스파게티 코드처럼 빙빙 꼬여 있는 모습을 볼 수 있다. 그렇기에 복잡도는 증가한다. 결국 처음 설계부터 중요하고, 분리도 잘해야 한다.</li>
</ol>
<ol start="3">
<li>유지 보수의 어려움<br>
개발 기간이 짧다는 말은 그만큼 코드를 막 작성할 수 있다는 말이고, 코드의 정체성이 혼란이 생길 수 있다. 꾸준하게 이런 일이 발생하게 되면 쓰레기 코드의 양 증가를 동시에 가져오게 된다. 이러한 이유들로 유지 보수 역시 어려워지게 된다.</li>
</ol>
<ol start="4">
<li>View와 Model의 결합도가 높다.<br>
MVC는 View와 Model간의 결합도가 높다. 대부분의 코드를 View에서 Model을 직접 호출하여 사용하게 된다. 그렇기에 View와 Model 간의 결합도가 높아지게 되고, 테스트 코드 작성에도 어려움이 발생한다.</li>
</ol>
<ol start="5">
<li>테스트 코드 작성이 어렵다.<br>
MVC는 대부분 UI에서 모든 걸 할 수 있기 때문에 테스트 코드 작성이 어려워지게 된다. 작성을 한다고 하더라도 UI 위주의 테스트 코드 작성이 가능하다. 하지만 UI는 변화가 자주있는 곳 중에 하나이다. UI가 아닌 모델까지 변경이 된다면…</li>
</ol>
<h2 id="참고">참고</h2>
<ul>
<li><a href="https://thdev.tech/androiddev/2016/10/23/Android-MVC-Architecture/" target="_blank" rel="noopener">Android MVP 무작정 따라하기 - MVC 구조 이해하기</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2019/01/16/Android-MVP-Step2/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/tags/MVP/archives/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 2</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 VictoryWoo. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/Victory.jpeg" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">VictoryWoo</h4>
        
            <div id="about-card-bio"><p>기록을 통해 사람들과 공유하는 것을 좋아합니다.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Android Developer</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->





    </body>
</html>
